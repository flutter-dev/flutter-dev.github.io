<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>国际化 Flutter 应用  - Flutter </title>
  <link rel="shortcut icon" href="/images/favicon.png">

  <meta name="description" content="">
  <meta name="keywords" content=" ">

  <link rel="stylesheet" href="/css/lavish-bootstrap.css">
  <link rel="stylesheet" href="/css/main.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Extended" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro%7CRoboto:500,400italic,300,400" rel="stylesheet">
  
  <link rel="canonical" href="http://localhost:4000/tutorials/internationalization/">

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-67589403-1', 'auto');
    ga('send', 'pageview');
  </script>

  <meta name="google-site-verification" content="HFqxhSbf9YA_0rBglNLzDiWnrHiK_w4cqDh2YD2GEY4" />
</head>


  <body class="">

    <div id="overlay-under-drawer"><!-- for the drawer on narrow screens --></div>

    <header class="site-header">
  <div class="container-fluid header-contents">
    <div class="row">
      <div class="col-md-12">
        <i class="fa fa-bars" id="sidebar-toggle-button" aria-hidden="true" style="display:none"></i>
        <img src="/images/flutter-mark-square-100.png" alt="Flutter Logo" width="40" height="40" style="vertical-align:middle">

        <a class="site-title" href="/">Flutter</a>

        <nav class="site-nav">
          <a href="#" class="menu-icon">
            <i class="material-icons-extended">more_vert</i>
          </a>
          <div class="trigger">
            <a class="page-link" href="/docs/">文档</a>
            <a class="page-link" href="/showcase/">案例</a>
            <a class="page-link" href="https://github.com/flutter/flutter">GitHub</a>
            <a class="page-link" href="https://pub.dartlang.org/flutter">库</a>
            <a class="page-link" href="/support/">支持</a>
            <a class="page-link" href="http://flutter-dev.cn">中文开发者论坛</a>
            <form action="/search/" class="nav-searchbox" id="cse-search-box" style="display: inline">
              <input type="hidden" name="cx" value="007067728241810524621:gm6vraqlc8c">
              <input type="hidden" name="ie" value="UTF-8">
              <input type="hidden" name="hl" value="en">
              <input type="search" name="q" id="q" autocomplete="off" placeholder="搜索">
            </form>
          </div>
        </nav>
      </div>
    </div> <!-- /.row -->
  </div> <!-- /.container -->
</header>


    <!-- Page Content -->
    <div class="container-fluid contents">
      <!-- Content Row -->
      <div class="row">

        <!-- Sidebar Column -->
        <div id="side-nav-container" class="col-sm-3">
          <ul id="mysidebar" class="nav">

  <li class="sidebar-title">入门</li>

    <ul class="sidebar-items">
      <li><a href="/get-started/install/">1: 安装</a></li>
      <li><a href="/get-started/editor/">2: 配置编辑器</a></li>
      <li><a href="/get-started/test-drive/">3: Flutter 初体验</a></li>
      <li><a href="/get-started/codelab/">4: 编写第一个 Flutter 应用</a></li>
      <li><a href="/get-started/learn-more/">5: 学习更多</a></li>
    </ul>

  <li class="sidebar-title">构建 UI</li>

    <ul class="sidebar-items">
      <li><a href="/widgets-intro/">框架预览</a></li>
      <li><a href="/widgets/">Widget 目录</a></li>
      <li><a href="/cookbook/">小案例</a></li>
      <li><a href="/catalog/samples/">示例目录</a></li>
      <li><a href="/codelabs">Codelab</a></li>
      <li><a href="/tutorials/layout/">构建布局 - 教程</a></li>
      <li><a href="/tutorials/interactive/">添加交互 - 教程</a></li>
      <li><a href="/web-analogs/"> Web 开发者参考</a></li>
      <li><a href="/flutter-for-android/">Android 开发者参考</a></li>
      <li><a href="/flutter-for-ios/">iOS 开发者参考</a></li>
      <li><a href="/flutter-for-react-native/">React Native 开发者参考</a></li>
      <li><a href="/gestures/">手势</a></li>
      <li><a href="/animations/">动画</a></li>
      <li><a href="/layout/">框约束</a></li>
      <li><a href="/assets-and-images/">资源与图像</a></li>
      <li><a href="/tutorials/internationalization">国际化</a></li>
      <li><a href="/accessibility">无障碍</a></li>
    </ul>

  <li class="sidebar-title">使用设备与 SDK 中的 API</li>

    <ul class="sidebar-items">
      <li><a href="/using-packages/">使用扩展包</a></li>
      <li><a href="/developing-packages/">开发扩展包</a></li>
      <li><a href="/platform-channels/">平台特定代码</a></li>
      <li><a href="/json/">JSON 和序列化</a></li>
      
    </ul>

  <li class="sidebar-title">开发与工具</li>

    <ul class="sidebar-items">
      <li><a href="/using-ide/">Flutter IDE 的使用</a></li>
      <li><a href="/hot-reload/">热重载的使用</a></li>
      <li><a href="/testing/">应用测试</a></li>
      <li><a href="/debugging/">应用调试</a></li>
      <li><a href="/ui-performance/">性能分析</a></li>
      <li><a href="/inspector/">用户界面检查</a></li>
      <li><a href="/android-release/">编译正式版的 Android 应用</a></li>
      <li><a href="/ios-release/">编译正式版的 iOS 应用</a></li>
      <li><a href="/fastlane-cd/">使用 Fastlane 持续部署</a></li>
      <li><a href="/upgrading/">升级 Flutter</a></li>
      <li><a href="/formatting/"> 格式化代码</a></li>
    </ul>

  <li class="sidebar-title">更多细节</li>

    <ul class="sidebar-items">
      <li><a href="/faq/">FAQ</a></li>
      <li><a href="/technical-overview">技术一览</a></li>
      <li><a href="https://docs.google.com/presentation/d/1B3p0kP6NV_XMOimRV09Ms75ymIjU5gr6GGIX74Om_DE/edit?usp=sharing">神奇的 Flutter - 幻灯片</a></li>
      <li><a href="https://docs.google.com/presentation/d/1cw7A4HbvM_Abv320rVgPVGiUP2msVs7tfGbkgdrTy0I/edit?usp=sharing">架构图</a></li>
      <li><a href="https://www.bilibili.com/video/av14430321/">Flutter 框架层设计 <i class="fa fa-video-camera" aria-hidden="true"></i></a></li>
      <li><a href="https://www.bilibili.com/video/av6269773/">Flutter 的渲染管线 <i class="fa fa-video-camera" aria-hidden="true"></i></a></li>
    </ul>

</ul>

        </div>

        
        

        <!-- Content Column -->
        <div class="col-sm-9 main-contents">
          <div class="main-contents-body">
            <article class="post-content">
  
  
  <header class="post-header">
      <div class="btn-group contribute" role="group">
         <a href="https://github.com/flutter/website/blob/master/zh_CN/tutorials/international/index.md" class="btn btn-sm">
            <i class="fa fa-pencil"></i> Edit Source
         </a>
         <a href="https://github.com/flutter/flutter/issues/new?title=Issue from website page 国际化 Flutter 应用&body=From URL: http://localhost:4000/tutorials/internationalization/&labels=dev: docs - website" class="btn btn-sm">
            <i class="fa fa-github"></i> File Issue
        </a>
     </div>
   <div>
    <h1 class="post-title">国际化 Flutter 应用 </h1>
   </div>

  </header>
  

  

<div class="whats-the-point">

  <p><b> <a id="whats-the-point" class="anchor" href="#whats-the-point" aria-hidden="true"><span class="octicon octicon-link"></span></a>你会学到:</b></p>

  <ul>
    <li>如何追踪设备的本地化（用户首选语言）。</li>
    <li>如何管理基于地区特性的应用值。</li>
    <li>如何定义本地化和应用支持。</li>
  </ul>

</div>

<p>如果你的应用可能被部署到会说另一种语言的用户那里你需要“国际化”它。这意味着您需要编写应用程序，使其能够为应用程序支持的每种语言或 “locale” 设置“本地化”值，比如文本和布局。Flutter 提供控件和类帮助实现国际化，Flutter 库本身也是支持国际化的。</p>

<p>接下来的教程主要根据 Flutter MaterialApp 类编写，因为大多数应用程序都是这样编写的。根据较低级别的WidgetsApp 类编写的应用程序也可以使用相同的类和逻辑进行国际化。</p>

<h3 id="contents">Contents</h3>

<ul>
  <li><a href="#setting-up">设置一个国际化的应用程序: the flutter_localizations package</a></li>
  <li><a href="#tracking-locale">跟踪区域设置:  Locale 类和 Localizations widget</a></li>
  <li><a href="#loading-and-retrieving">加载和获取本地化值</a></li>
  <li><a href="#using-bundles">使用打包好的LocalizationsDelegates</a></li>
  <li><a href="#defining-class">为应用的本地化资源定义一个类</a></li>
  <li><a href="#specifying-supportedlocales">指定应用的 supportedLocales 参数</a></li>
  <li><a href="#alternative-class">指定本地化资源的另一个类</a></li>
  <li><a href="#dart-tools">附录：使用 Dart intl 工具</a></li>
</ul>

<aside class="alert alert-info">
  <p><strong>国际化 APP 例子</strong><br /></p>

  <p>如果想通过阅读国际化 Flutter 程序的源码开始，这里是两个小例子。第一个旨在尽可能简单，第二个使用 <a href="https://pub.dartlang.org/packages/intl">intl</a> 包提供的 API 和工具。 如果您没有使用过 Dart 的 intl 包，请参阅 <a href="#dart-tools">Using the Dart intl tools.</a></p>

  <ul>
    <li><a href="https://github.com/flutter/website/tree/master/_includes/code/internationalization/minimal/">最小限度国际化</a></li>
    <li><a href="https://github.com/flutter/website/tree/master/_includes/code/internationalization/intl/">基于 <code class="highlighter-rouge">intl</code> 包国际化</a></li>
  </ul>
</aside>

<p><a name="setting-up"></a></p>
<h2 id="设置一个国际化的应用程序-the-flutter_localizations-package">设置一个国际化的应用程序: the flutter_localizations package</h2>

<p>默认情况下，Flutter 提供美式英语本地化。要添加对其他语言的支持，应用程序必须指定其他 MaterialApp 属性，并包含名为 <code class="highlighter-rouge">flutter_localizations</code> 的单独包。截止 2017 年 10 月，该软件包支持15种语言。</p>

<p>要使用 flutter_localizations，添加该包作为依赖项到您的 <code class="highlighter-rouge">pubspec.yaml</code> 文件:</p>

<pre class="prettyprint highlighter-rouge highlight lang-yaml language-yaml"><code>dependencies:
  flutter:
    sdk: flutter
  flutter_localizations:
    sdk: flutter</code></pre>

<p>然后，导入 flutter_localizations 库并为 MaterialApp 指定 <code class="highlighter-rouge">localizationsDelegates</code> 和 <code class="highlighter-rouge">supportedLocales</code> :</p>

<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter_localizations/flutter_localizations.dart&#39;;

new MaterialApp(
 localizationsDelegates: [
   // ... app-specific localization delegate[s] here
   GlobalMaterialLocalizations.delegate,
   GlobalWidgetsLocalizations.delegate,
 ],
 supportedLocales: [
    const Locale(&#39;en&#39;, &#39;US&#39;), // English
    const Locale(&#39;he&#39;, &#39;IL&#39;), // Hebrew
    // ... other locales the app supports
  ],
  // ...
)</code></pre>

<p>基于 WidgetsApp 的应用程序类似，只是不需 <code class="highlighter-rouge">GlobalMaterialLocalizations.delegate</code> 。</p>

<p><code class="highlighter-rouge">localizationsDelegates</code> 列表中的元素是生成本地化值集合的工厂。<code class="highlighter-rouge">GlobalMaterialLocalizations.delegate</code> 为 Material Components 库提供本地化字符串和其他值。<code class="highlighter-rouge">GlobalWidgetsLocalizations.delegate</code> 为控件库定义了默认文本方向，从左到右或从右到左。</p>

<p>有关这些属性的更多信息，它们依赖的类型以及如何国际化 Flutter 应用，这些都可以在下面找到。</p>

<p><a name="tracking-locale"></a></p>
<h2 id="跟踪区域设置--locale-类和-localizations-widget">跟踪区域设置:  Locale 类和 Localizations widget</h2>

<p><a href="https://docs.flutter.io/flutter/dart-ui/Locale-class.html"><code class="highlighter-rouge">Locale</code></a> 用来识别用户语言。移动设备支持为所有应用设置区域，通常通过系统设置按钮。 国际化程序通过显示特定区域的值进行响应。例如，如果用户将设备的语言环境从英语切换到法语，则显示 “Hello World” 的文本控件将会用  “Bonjour le monde” 重建。</p>

<p><a href="https://docs.flutter.io/flutter/widgets/Localizations-class.html"><code class="highlighter-rouge">Localizations</code></a> 控件定义了其子项的本地化及子项依赖的本地化资源。<a href="https://docs.flutter.io/flutter/widgets/WidgetsApp-class.html">WidgetsApp</a> 创建一个本地化控件并在系统区域变化后重建。</p>

<p>你总是可以通过 <code class="highlighter-rouge">Localizations.localeOf()</code>查询应用当前区域设置:</p>

<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>Locale myLocale = Localizations.localeOf(context);</code></pre>

<p><a name="loading-and-retrieving"></a></p>
<h2 id="加载和获取本地化值">加载和获取本地化值</h2>

<p>Localizations widget 用于加载和查找包含本地化值的集合的对象。应用程序通过   <a href="https://docs.flutter.io/flutter/widgets/Localizations/of.html"><code class="highlighter-rouge">Localizations.of(context,type)</code></a>来引用这些对象。
如果设备的区域设置发生更改， Localizations widget 会自动加载新区域设置的值，然后重新构建使用它们的控件。因为 Localizations 像 <a href="https://docs.flutter.io/flutter/widgets/InheritedWidget-class.html">InheritedWidget</a> 一样工作。当构建函数引用了继承的控件时，会创建对继承的控件的隐式依赖关系。当继承的控件更改时（Localizations widget 的区域设置发生更改时），将重建其依赖的上下文。</p>

<p>本地化值由 Localizations widget 的 <a href="https://docs.flutter.io/flutter/widgets/LocalizationsDelegate-class.html">LocalizationsDelegate</a>  列表加载.
每个委托必须定义一个异步 <a href="https://docs.flutter.io/flutter/widgets/LocalizationsDelegate/load.html"><code class="highlighter-rouge">load()</code></a> 方法，以生成封装了一系列本地化值的对象。通常这些对象为每个本地化值定义一个方法。</p>

<p>大型应用中，不同的模块或包可能跟它们自己的本地化绑定在一起。这是 Localizations widget 管理对象表的原因，每个 LocalizationsDelegate 有一个对象表。要重新获得由 LocalizationsDelegate 的 <code class="highlighter-rouge">load</code> 方法之一生成的对象，您需要指定一个  BuildContext 和对象类型。</p>

<p>例如，Material Components widgets 的本地化字符由 <a href="https://docs.flutter.io/flutter/material/MaterialLocalizations-class.html">MaterialLocalizations</a>
 类定义。这个类的实例由  <a href="https://docs.flutter.io/flutter/material/MaterialApp-class.html">MaterialApp</a> 类提供的 LocalizationDelegate 创建。它们可以通过 <code class="highlighter-rouge">Localizations.of</code> 获取到:</p>

<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>Localizations.of&lt;MaterialLocalizations&gt;(context, MaterialLocalizations);</code></pre>

<p>这个特殊的 <code class="highlighter-rouge">Localizations.of()</code> 表达式使用很频繁，所以 MaterialLocalizations 类提供了一个方便的简写:</p>

<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>static MaterialLocalizations of(BuildContext context) {
  return Localizations.of&lt;MaterialLocalizations&gt;(context, MaterialLocalizations);
}

/// References to the localized values defined by MaterialLocalizations
/// are typically written like this:

tooltip: MaterialLocalizations.of(context).backButtonTooltip,</code></pre>

<p><a name="using-bundles"></a></p>
<h2 id="使用打包好的localizationsdelegates">使用打包好的LocalizationsDelegates</h2>

<p>为了尽可能小而且简单，flutter 软件包中仅提供美式英语值的 MaterialLocalizations 和 WidgetsLocalizations 接口的实现。这些实现类分别称为 DefaultMaterialLocalizations 和 DefaultWidgetsLocalizations，他们会自动包含除非为应用程序的 <code class="highlighter-rouge">localizationsDelegates</code> 参数指定了相同基本类型的不同委托。</p>

<p>flutter_localizations 软件包包含 GlobalMaterialLocalizations 和 GlobalWidgetsLocalizations 的本地化接口的多语言实现。国际化的应用程序必须按照 <a href="#setting-up">Setting up an internationalized app.</a> 为这些类指定本地化代理。</p>

<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter_localizations/flutter_localizations.dart&#39;;

new MaterialApp(
 localizationsDelegates: [
   // ... app-specific localization delegate[s] here
   GlobalMaterialLocalizations.delegate,
   GlobalWidgetsLocalizations.delegate,
 ],
 supportedLocales: [
    const Locale(&#39;en&#39;, &#39;US&#39;), // English
    const Locale(&#39;he&#39;, &#39;IL&#39;), // Hebrew
    // ... other locales the app supports
  ],
  // ...
)</code></pre>

<p>全局本地化代理构建相应类特定语言环境下的实例。例如，<code class="highlighter-rouge">GlobalMaterialLocalizations.delegate</code> 是一个生成 GlobalMaterialLocalizations 实例的本地化代理 。</p>

<p>截止 2017 年 10 月，国际化代理类支持<a href="https://github.com/flutter/flutter/tree/master/packages/flutter_localizations/lib/src/l10n">约15种语言</a></p>

<p><a name="defining-class"></a></p>
<h2 id="为应用的本地化资源定义一个类">为应用的本地化资源定义一个类</h2>

<p>将所有这些放在一起用于国际化应用通常从封装应用程序本地化值的类开始。下面的例子是这些类的典型例子。</p>

<p>这个例子的<a href="https://github.com/flutter/website/tree/master/_includes/code/internationalization/intl/">完整代码</a>。</p>

<p>这个例子基于 <a href="https://pub.dartlang.org/packages/intl">intl</a> 软件包提供的 API 和 工具。 <a href="#alternative-class">应用本地化资源的另一个类</a> 描述了一个不依赖 intl 的<a href="https://github.com/flutter/website/tree/master/_includes/code/internationalization/minimal">示例</a>。</p>

<p>DemoLocalizations 类包含应用字符串 (仅用于示例)，该字符串被译为应用程序支持的语言环境。使用 Dart 的  <a href="https://pub.dartlang.org/packages/intl">intl package</a> 生成的 <code class="highlighter-rouge">initializeMessages()</code> 函数加载翻译的字符串，使用 <a href="https://www.dartdocs.org/documentation/intl/0.15.1/intl/Intl/message.html"><code class="highlighter-rouge">Intl.message()</code></a> 来查找。</p>

<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class DemoLocalizations {
  static Future&lt;DemoLocalizations&gt; load(Locale locale) {
    final String name = locale.countryCode.isEmpty ? locale.languageCode : locale.toString();
    final String localeName = Intl.canonicalizedLocale(name);
    return initializeMessages(localeName).then((Null _) {
      Intl.defaultLocale = localeName;
      return new DemoLocalizations();
    });
  }

  static DemoLocalizations of(BuildContext context) {
    return Localizations.of&lt;DemoLocalizations&gt;(context, DemoLocalizations);
  }

  String get title {
    return Intl.message(
      &#39;Hello World&#39;,
      name: &#39;title&#39;,
      desc: &#39;Title for the Demo application&#39;,
    );
  }
}</code></pre>

<p>基于 <code class="highlighter-rouge">intl</code> 包的类导入生成的 message 目录，该目录提供 <code class="highlighter-rouge">initializeMessages()</code> 函数和每个语言环境的后备存储 <code class="highlighter-rouge">Intl.message()</code>。message 目录由 <a href="#dart-tools"><code class="highlighter-rouge">intl</code> tool</a> 生成，它分析了包含 <code class="highlighter-rouge">Intl.message()</code> 方法调用的类的源码。在这个例子，这就是  DemoLocalizations 类。</p>

<p><a name="specifying-supportedlocales"></a></p>
<h2 id="指定应用的-supportedlocales-参数">指定应用的 supportedLocales 参数</h2>

<p>虽然 Flutter 的 Material Components library 包含对大约16种语言的支持，但默认情况下仅提供英文。因为工具库支持与应用程序不同的一组语言环境是没有意义的，所以由开发者决定支持哪种语言。</p>

<p>MaterialApp<a href="https://docs.flutter.io/flutter/material/MaterialApp/supportedLocales.html"><code class="highlighter-rouge">supportedLocales</code></a> 参数限制语言环境更改。当用户更改了设备上的区域设置后，新区域如果是列表成员，则应用的 <code class="highlighter-rouge">Localizations</code> 控件就适用于该区域，如果找不到设备区域的精确匹配项则使用第一个匹配区域设置<a href="https://docs.flutter.io/flutter/dart-ui/Locale/languageCode.html"><code class="highlighter-rouge">languageCode</code></a>。如果失败，则使用 <code class="highlighter-rouge">supportedLocales</code> 列表的第一项。</p>

<p>就之前的 DemoApp 示例，该应用只接受美国英语或加拿大法语语言环境，并将美国英语（列表中的第一个语言环境）替换为其他任何内容。</p>

<p>如果应用想要使用不同的  “locale resolution”  方法可以提供一个<a href="https://docs.flutter.io/flutter/widgets/LocaleResolutionCallback.html"><code class="highlighter-rouge">localeResolutionCallback</code>.</a>
例如，要让您的应用无条件接受用户选择的任何区域：</p>

<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class DemoApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
       localeResolutionCallback(Locale locale, Iterable&lt;Locale&gt; supportedLocales) {
         return locale;
       }
       // ...
    );
  }
}</code></pre>

<p><a name="alternative-class"></a></p>
<h2 id="指定本地化资源的另一个类">指定本地化资源的另一个类</h2>

<p>之前的 DemoApp 示例是根据 Dart intl 包定义的。为了简单起见，开发人员可以选择自己的方法来管理本地化值，也可以与不同的 i18n 框架进行集成。</p>

<p>这个示例的<a href="https://github.com/flutter/website/tree/master/_includes/code/internationalization/minimal/">完整代码</a>。</p>

<p>在此版本的 DemoApp 中，包含应用程序本地化的类 DemoLocalizations 将直接在每种语言 Map 中包含其所有的翻译：</p>

<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class DemoLocalizations {
  DemoLocalizations(this.locale);

  final Locale locale;

  static DemoLocalizations of(BuildContext context) {
    return Localizations.of&lt;DemoLocalizations&gt;(context, DemoLocalizations);
  }

  static Map&lt;String, Map&lt;String, String&gt;&gt; _localizedValues = {
    &#39;en&#39;: {
      &#39;title&#39;: &#39;Hello World&#39;,
    },
    &#39;es&#39;: {
      &#39;title&#39;: &#39;Hola Mundo&#39;,
    },
  };

  String get title {
    return _localizedValues[locale.languageCode][&#39;title&#39;];
  }
}</code></pre>

<p>在最小限度的国际化应用中 DemoLocalizationsDelegate 稍有不同。它的 <code class="highlighter-rouge">load</code> 方法返回一个<a href="https://docs.flutter.io/flutter/foundation/SynchronousFuture-class.html">SynchronousFuture</a> 因为不需要进行异步加载。</p>

<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class DemoLocalizationsDelegate extends LocalizationsDelegate&lt;DemoLocalizations&gt; {
  const DemoLocalizationsDelegate();

  @override
  bool isSupported(Locale locale) =&gt; [&#39;en&#39;, &#39;es&#39;].contains(locale.languageCode);

  @override
  Future&lt;DemoLocalizations&gt; load(Locale locale) {
    return new SynchronousFuture&lt;DemoLocalizations&gt;(new DemoLocalizations(locale));
  }

  @override
  bool shouldReload(DemoLocalizationsDelegate old) =&gt; false;
}</code></pre>

<p><a name="dart-tools"></a></p>
<h2 id="附录-使用dart-intl工具">附录: 使用Dart intl工具</h2>

<p>在使用 Dart <a href="https://pub.dartlang.org/packages/intl"><code class="highlighter-rouge">intl</code></a> 包构建 API 之前，您需要查看 <code class="highlighter-rouge">intl</code> 包的文档。以下是根据 intl 软件包本地化应用的过程摘要。</p>

<p>示例程序依赖于一个生成的源文件  <code class="highlighter-rouge">l10n/messages_all.dart</code> ，它定义了应用程序所用的所有本地化字符串。</p>

<p>重新构建 <code class="highlighter-rouge">l10n/messages_all.dart</code> 需要两个步骤。</p>

<ol>
<li>
    <p>将应用程序的根目录作为当前目录，从 <code class="highlighter-rouge">lib/main.dart</code> 生成<code class="highlighter-rouge">l10n/intl_messages.arb</code> :</p>

    <pre class="prettyprint highlighter-rouge highlight lang-sh language-sh"><code>$ flutter pub pub run intl_translation:extract_to_arb --output-dir=lib/i10n lib/main.dart</code></pre>

    <p><code class="highlighter-rouge">intl_messages.arb</code> 文件是一个 JSON 格式的map，拥有一个在 <code class="highlighter-rouge">main.dart</code> 中定义的  <code class="highlighter-rouge">Intl.message()</code> 函数入口。此文件作为英语和西班牙语翻译的一个模板， <code class="highlighter-rouge">intl_en.arb</code> 和 <code class="highlighter-rouge">intl_es.arb</code>。这些翻译是由您，开发人员创建的。</p>
  </li>

<li>
    <p>使用应用程序的根目录作为当前目录，为每个 <code class="highlighter-rouge">intl_&lt;locale&gt;.arb</code> 文件生成 <code class="highlighter-rouge">intl_messages_&lt;locale&gt;.dart</code> ，并在 <code class="highlighter-rouge">intl_messages_all.dart</code> 中导入所有 message 文件：</p>

    <pre class="prettyprint highlighter-rouge highlight lang-sh language-sh"><code>$ flutter pub pub run intl_translation:generate_from_arb --output-dir=lib/l10n \
   --no-use-deferred-loading lib/main.dart lib/l10n/intl_*.arb</code></pre>

    <p>DemoLocalizations 类使用生成的 <code class="highlighter-rouge">initializeMessages()</code> 函数（定义在  <code class="highlighter-rouge">intl_messages_all.dart</code>）来加载本地化的 message 并使用 <code class="highlighter-rouge">Intl.message()</code> 来查找它们。</p>
  </li>

</ol>


</article>

          </div>
        </div>

        

      </div> <!-- /.row -->
    </div> <!-- /.container -->

    <footer class="site-footer">
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-12">
        <div class="logo">
          <img src="/images/flutter-mark-square-100.png" alt="Flutter Logo" width="100" height="100">
        </div>
        <p class="site-footer__link-list">
          <a href="https://groups.google.com/forum/#!forum/flutter-dev">flutter-dev@</a> &bull;
          <a href="https://twitter.com/flutterio">twitter</a> &bull;
          <a href="https://github.com/flutter/">github</a> &bull;
          <a href="/tos">terms</a> &bull;
          <a href="https://www.google.com/intl/en/policies/privacy/">privacy</a> &bull;
          <a href="https://github.com/orgs/flutter-dev/teams/flutter/">翻译组</a>
        </p>

        <p class="licenses">
          除非另有说明，否则本作品根据
          <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">知识共享署名 4.0 国际许可证</a>进行许可，代码示例已根据 BSD 许可证进行许可。
        </p>
      </div>
    </div>
  </div>
</footer>

    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="/js/sidebar_toggle.js"></script>
    <script src="/js/customscripts.js"></script>
    <script src="/js/prism.js"></script>
    <script src="/js/tabs.js"></script>
    <script src="/js/archive.js"></script>
    
    <script async="" defer="" src="//survey.g.doubleclick.net/async_survey?site=at3ul57xpub2vk3oxt2ytw365i"></script>
  </body>
</html>
