<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Android 开发者参考  - Flutter </title>
  <link rel="shortcut icon" href="/images/favicon.png">

  <meta name="description" content="">
  <meta name="keywords" content=" ">

  <link rel="stylesheet" href="/css/lavish-bootstrap.css">
  <link rel="stylesheet" href="/css/main.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Extended" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro%7CRoboto:500,400italic,300,400" rel="stylesheet">
  
  <link rel="canonical" href="http://localhost:4000/flutter-for-android/">

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-67589403-1', 'auto');
    ga('send', 'pageview');
  </script>

  <meta name="google-site-verification" content="HFqxhSbf9YA_0rBglNLzDiWnrHiK_w4cqDh2YD2GEY4" />
</head>


  <body class="">

    <div id="overlay-under-drawer"><!-- for the drawer on narrow screens --></div>

    <header class="site-header">
  <div class="container-fluid header-contents">
    <div class="row">
      <div class="col-md-12">
        <i class="fa fa-bars" id="sidebar-toggle-button" aria-hidden="true" style="display:none"></i>
        <img src="/images/flutter-mark-square-100.png" alt="Flutter Logo" width="40" height="40" style="vertical-align:middle">

        <a class="site-title" href="/">Flutter</a>

        <nav class="site-nav">
          <a href="#" class="menu-icon">
            <i class="material-icons-extended">more_vert</i>
          </a>
          <div class="trigger">
            <a class="page-link" href="/docs/">文档</a>
            <a class="page-link" href="https://github.com/flutter/flutter">GitHub</a>
            <a class="page-link" href="https://pub.dartlang.org/flutter">库</a>
            <a class="page-link" href="/support/">支持</a>
            <a class="page-link" href="http://flutter-dev.cn">论坛</a>
            <form action="/search/" class="nav-searchbox" id="cse-search-box" style="display: inline">
              <input type="hidden" name="cx" value="007067728241810524621:gm6vraqlc8c">
              <input type="hidden" name="ie" value="UTF-8">
              <input type="hidden" name="hl" value="en">
              <input type="search" name="q" id="q" autocomplete="off" placeholder="搜索">
            </form>
          </div>
        </nav>
      </div>
    </div> <!-- /.row -->
  </div> <!-- /.container -->
</header>


    <!-- Page Content -->
    <div class="container-fluid contents">
      <!-- Content Row -->
      <div class="row">

        <!-- Sidebar Column -->
        <div id="side-nav-container" class="col-sm-3">
          <ul id="mysidebar" class="nav">

  <li class="sidebar-title">开始入门</li>

    <ul class="sidebar-items">
      <li><a href="/get-started/install/">1: 安装</a></li>
      <li><a href="/get-started/editor/">2: 配置编辑器</a></li>
      <li><a href="/get-started/test-drive/">3: 试运行</a></li>
      <li><a href="/get-started/codelab/">4: 编写第一个 Flutter 应用</a></li>
      <li><a href="/get-started/learn-more/">5: 学习更多</a></li>
    </ul>

  <li class="sidebar-title">构建 UI</li>

    <ul class="sidebar-items">
      <li><a href="/widgets-intro/">框架预览</a></li>
      <li><a href="/widgets/">部件目录</a></li>
      <li><a href="/cookbook/">小案例</a></li>
      <li><a href="/catalog/samples/">应用示例目录</a></li>
      <li><a href="https://codelabs.developers.google.com/codelabs/flutter/index.html#0">构建漂亮的用户界面 - Codelab</a></li>
      <li><a href="/tutorials/layout/">构建布局 - 教程</a></li>
      <li><a href="/tutorials/interactive/">添加交互 - 教程</a></li>
      <li><a href="/web-analogs/">HTML/CSS 模式</a></li>
      <li><a href="/flutter-for-android/">Android 开发者参考</a></li>
      <li><a href="/flutter-for-react-native/">React Native 开发者参考</a></li>
      <li><a href="/gestures/">手势</a></li>
      <li><a href="/animations/">动画</a></li>
      <li><a href="/custom-fonts/">自定义字体</a></li>
      <li><a href="/layout/">框约束</a></li>
      <li><a href="/assets-and-images/">资源与图像</a></li>
      <li><a href="/text-input/">文本输入</a></li>
      <li><a href="/routing-and-navigation/">界面路由与导航</a></li>
      <li><a href="/tutorials/internationalization">国际化</a></li>
    </ul>

  <li class="sidebar-title">使用设备与 SDK 中的 API</li>

    <ul class="sidebar-items">
      <li><a href="/using-packages/">使用扩展包</a></li>
      <li><a href="/developing-packages/">开发扩展包</a></li>
      <li><a href="/platform-channels/">平台特定代码</a></li>
      <li><a href="/reading-writing-files/">文件的读写</a></li>
      <li><a href="/networking/">网络和 HTTP</a></li>
      <li><a href="/json/">JSON 和序列化</a></li>
      
    </ul>

  <li class="sidebar-title">开发与工具</li>

    <ul class="sidebar-items">
      <li><a href="/using-ide/">Flutter IDE 的使用</a></li>
      <li><a href="/hot-reload/">热重载的使用</a></li>
      <li><a href="/testing/">应用测试</a></li>
      <li><a href="/debugging/">应用调试</a></li>
      <li><a href="/inspector/">用户界面检查</a></li>
      <li><a href="/android-release/">编译正式版的 Android 应用</a></li>
      <li><a href="/ios-release/">编译正式版的 iOS 应用</a></li>
      <li><a href="/upgrading/">升级 Flutter</a></li>
      <li><a href="/formatting/"> 格式化代码</a></li>
    </ul>

  <li class="sidebar-title">更多细节</li>

    <ul class="sidebar-items">
      <li><a href="/faq/">FAQ</a></li>
      <li><a href="/technical-overview">技术一览</a></li>
      <li><a href="https://docs.google.com/presentation/d/1B3p0kP6NV_XMOimRV09Ms75ymIjU5gr6GGIX74Om_DE/edit?usp=sharing">神奇的 Flutter - 幻灯片</a></li>
      <li><a href="https://docs.google.com/presentation/d/1cw7A4HbvM_Abv320rVgPVGiUP2msVs7tfGbkgdrTy0I/edit?usp=sharing">架构图</a></li>
      <li><a href="https://www.bilibili.com/video/av14430321/">Flutter 框架层设计 <i class="fa fa-video-camera" aria-hidden="true"></i></a></li>
      <li><a href="https://www.bilibili.com/video/av6269773/">Flutter 的渲染管线 <i class="fa fa-video-camera" aria-hidden="true"></i></a></li>
    </ul>

</ul>

        </div>

        
        

        <!-- Content Column -->
        <div class="col-sm-9 main-contents">
          <div class="main-contents-body">
            <article class="post-content">
  
  
  <header class="post-header">
      <div class="btn-group contribute" role="group">
         <a href="https://github.com/flutter/website/blob/master/flutter-for-android.md" class="btn btn-sm">
            <i class="fa fa-pencil"></i> Edit Source
         </a>
         <a href="https://github.com/flutter/flutter/issues/new?title=Issue from website page Android 开发者参考&body=From URL: http://localhost:4000/flutter-for-android.md&labels=dev: docs - website" class="btn btn-sm">
            <i class="fa fa-github"></i> File Issue
        </a>
     </div>
   <div>
    <h1 class="post-title">Android 开发者参考 </h1>
   </div>

  </header>
  

  <p>本文档适用于 Android 开发者，开发者们可以将现有的 Android 知识应用于 Flutter 构建移动应用程序。如果您了解 Android 框架的基础知识，那么您可以将此文档当做是 Flutter 开发的一个开始。</p>

<p>您现有的 Android 知识与技能对构建 Flutter 应用有非常高的价值。因为 Flutter 依靠操作系统提供了众多的功能和相关配置。Flutter 是一种为移动设备构建 UI 的新方法，除了 UI 构建外它还有一套插件系统用于与 Android 或 iOS 系统进行通信。如果您是 Android 方面的专家，那么您就不必学习 Flutter 的所有内容了。</p>

<p>通过以下链接可以快速跳转到您想要了解的内容：</p>

<ul id="markdown-toc">
  <li><a href="#视图" id="markdown-toc-视图">视图</a>    <ul>
      <li><a href="#android-中的-view-在-flutter-中对应什么" id="markdown-toc-android-中的-view-在-flutter-中对应什么">Android 中的 View 在 Flutter 中对应什么？</a></li>
      <li><a href="#如何更新-widget" id="markdown-toc-如何更新-widget">如何更新 Widget</a></li>
      <li><a href="#如果使用-widget-进行布局呢xml-布局文件在哪里" id="markdown-toc-如果使用-widget-进行布局呢xml-布局文件在哪里">如果使用 Widget 进行布局呢？XML 布局文件在哪里？</a></li>
      <li><a href="#如何在布局中添加或移除组件" id="markdown-toc-如何在布局中添加或移除组件">如何在布局中添加或移除组件</a></li>
      <li><a href="#in-android-i-can-animate-a-view-by-viewanimate-how-can-i-do-that-to-a-widget" id="markdown-toc-in-android-i-can-animate-a-view-by-viewanimate-how-can-i-do-that-to-a-widget">In Android, I can Animate a view by View.animate(), how can I do that to a Widget</a></li>
      <li><a href="#how-do-i-use-a-canvas-to-drawpaint" id="markdown-toc-how-do-i-use-a-canvas-to-drawpaint">How do I use a Canvas to draw/paint</a></li>
      <li><a href="#how-do-i-build-custom-widgets" id="markdown-toc-how-do-i-build-custom-widgets">How do I build custom Widgets</a></li>
    </ul>
  </li>
  <li><a href="#intents" id="markdown-toc-intents">Intents</a>    <ul>
      <li><a href="#what-is-the-equivalent-of-an-intent-in-flutter" id="markdown-toc-what-is-the-equivalent-of-an-intent-in-flutter">What is the equivalent of an Intent in Flutter</a></li>
      <li><a href="#how-do-i-handle-incoming-intents-from-external-applications-in-flutter" id="markdown-toc-how-do-i-handle-incoming-intents-from-external-applications-in-flutter">How do I handle incoming Intents from external applications in Flutter</a></li>
      <li><a href="#what-is-the-equivalent-of-startactivityforresult" id="markdown-toc-what-is-the-equivalent-of-startactivityforresult">What is the equivalent of startActivityForResult</a></li>
    </ul>
  </li>
  <li><a href="#async-ui" id="markdown-toc-async-ui">Async UI</a>    <ul>
      <li><a href="#what-is-the-equivalent-of-runonuithread-in-flutter" id="markdown-toc-what-is-the-equivalent-of-runonuithread-in-flutter">What is the equivalent of runOnUiThread in Flutter</a></li>
      <li><a href="#what-is-the-equivalent-of-an-asynctask-or-intentservice-on-android" id="markdown-toc-what-is-the-equivalent-of-an-asynctask-or-intentservice-on-android">What is the equivalent of an AsyncTask or IntentService on Android</a></li>
      <li><a href="#what-is-the-equivalent-of-okhttp-on-flutter" id="markdown-toc-what-is-the-equivalent-of-okhttp-on-flutter">What is the equivalent of OkHttp on Flutter</a></li>
      <li><a href="#how-do-i-show-progress-indicator-in-flutter-when-there-is-a-task-that-is-running" id="markdown-toc-how-do-i-show-progress-indicator-in-flutter-when-there-is-a-task-that-is-running">How do I show progress indicator in Flutter when there is a task that is running</a></li>
    </ul>
  </li>
  <li><a href="#project-structure--resources" id="markdown-toc-project-structure--resources">Project Structure &amp; Resources</a>    <ul>
      <li><a href="#where-do-i-store-my-resolution-dependent-image-files-hdpixxhdpi" id="markdown-toc-where-do-i-store-my-resolution-dependent-image-files-hdpixxhdpi">Where do I store my resolution dependent image files? HDPI/XXHDPI</a></li>
      <li><a href="#where-do-i-store-strings-how-do-i-store-different-locales" id="markdown-toc-where-do-i-store-strings-how-do-i-store-different-locales">Where do I store strings? How do I store different locales</a></li>
      <li><a href="#what-is-the-equivalent-of-a-gradle-file-to-add-my-external-dependencies" id="markdown-toc-what-is-the-equivalent-of-a-gradle-file-to-add-my-external-dependencies">What is the equivalent of a Gradle file to add my external dependencies</a></li>
    </ul>
  </li>
  <li><a href="#activities-and-fragments" id="markdown-toc-activities-and-fragments">Activities and Fragments</a>    <ul>
      <li><a href="#what-are-the-equivalent-of-activities-and-fragments" id="markdown-toc-what-are-the-equivalent-of-activities-and-fragments">What are the equivalent of activities and fragments</a></li>
      <li><a href="#how-do-i-listen-to-android-activity-lifecycle-events" id="markdown-toc-how-do-i-listen-to-android-activity-lifecycle-events">How do I listen to Android Activity lifecycle events</a></li>
    </ul>
  </li>
  <li><a href="#layouts" id="markdown-toc-layouts">Layouts</a>    <ul>
      <li><a href="#what-is-the-equivalent-of-a-linearlayout" id="markdown-toc-what-is-the-equivalent-of-a-linearlayout">What is the equivalent of a LinearLayout</a></li>
      <li><a href="#what-is-the-equivalent-of-a-relativelayout" id="markdown-toc-what-is-the-equivalent-of-a-relativelayout">What is the equivalent of a RelativeLayout</a></li>
      <li><a href="#what-is-the-equivalent-of-a-scrollview" id="markdown-toc-what-is-the-equivalent-of-a-scrollview">What is the equivalent of a ScrollView</a></li>
    </ul>
  </li>
  <li><a href="#gesture-detection-and-touch-event-handling" id="markdown-toc-gesture-detection-and-touch-event-handling">Gesture Detection and Touch Event Handling</a>    <ul>
      <li><a href="#how-do-i-add-an-onclick-listener-to-a-widget-in-flutter" id="markdown-toc-how-do-i-add-an-onclick-listener-to-a-widget-in-flutter">How do I add an onClick listener to a widget in Flutter</a></li>
      <li><a href="#how-do-i-handle-other-gestures-on-widgets" id="markdown-toc-how-do-i-handle-other-gestures-on-widgets">How do I handle other gestures on widgets</a></li>
    </ul>
  </li>
  <li><a href="#listviews--adapters" id="markdown-toc-listviews--adapters">Listviews &amp; Adapters</a>    <ul>
      <li><a href="#what-is-the-alternative-to-a-listview-in-flutter" id="markdown-toc-what-is-the-alternative-to-a-listview-in-flutter">What is the alternative to a ListView in Flutter</a></li>
      <li><a href="#how-do-i-know-which-list-item-is-clicked-on" id="markdown-toc-how-do-i-know-which-list-item-is-clicked-on">How do I know which list item is clicked on</a></li>
      <li><a href="#how-do-i-update-listviews-dynamically" id="markdown-toc-how-do-i-update-listviews-dynamically">How do I update ListView’s dynamically</a></li>
    </ul>
  </li>
  <li><a href="#working-with-text" id="markdown-toc-working-with-text">Working with Text</a>    <ul>
      <li><a href="#how-do-i-set-custom-fonts-on-my-text-widgets" id="markdown-toc-how-do-i-set-custom-fonts-on-my-text-widgets">How do I set custom fonts on my Text widgets</a></li>
      <li><a href="#how-do-i-style-my-text-widgets" id="markdown-toc-how-do-i-style-my-text-widgets">How do I style my Text widgets</a></li>
    </ul>
  </li>
  <li><a href="#form-input" id="markdown-toc-form-input">Form Input</a>    <ul>
      <li><a href="#what-is-the-equivalent-of-a-hint-on-an-input" id="markdown-toc-what-is-the-equivalent-of-a-hint-on-an-input">What is the equivalent of a “hint” on an Input</a></li>
      <li><a href="#how-do-i-show-validation-errors" id="markdown-toc-how-do-i-show-validation-errors">How do I show validation errors</a></li>
    </ul>
  </li>
  <li><a href="#flutter-plugins" id="markdown-toc-flutter-plugins">Flutter Plugins</a>    <ul>
      <li><a href="#how-do-i-access-the-gps-sensor" id="markdown-toc-how-do-i-access-the-gps-sensor">How do I access the GPS sensor</a></li>
      <li><a href="#how-do-i-access-the-camera" id="markdown-toc-how-do-i-access-the-camera">How do I access the Camera</a></li>
      <li><a href="#how-do-i-log-in-with-facebook" id="markdown-toc-how-do-i-log-in-with-facebook">How do I log in with Facebook</a></li>
      <li><a href="#how-do-i-build-my-own-custom-native-integrations" id="markdown-toc-how-do-i-build-my-own-custom-native-integrations">How do I build my own custom native integrations</a></li>
      <li><a href="#how-do-i-use-the-ndk-in-my-flutter-application" id="markdown-toc-how-do-i-use-the-ndk-in-my-flutter-application">How do I use the NDK in my Flutter application</a></li>
    </ul>
  </li>
  <li><a href="#themes" id="markdown-toc-themes">Themes</a>    <ul>
      <li><a href="#how-do-i-theme-my-material-styled-app" id="markdown-toc-how-do-i-theme-my-material-styled-app">How do I theme my Material-styled app</a></li>
    </ul>
  </li>
  <li><a href="#databases-and-local-storage" id="markdown-toc-databases-and-local-storage">Databases and local storage</a>    <ul>
      <li><a href="#how-do-i-access-shared-preferences-in-flutter" id="markdown-toc-how-do-i-access-shared-preferences-in-flutter">How do I access Shared Preferences in Flutter?</a></li>
      <li><a href="#how-do-i-access-sqlite-in-flutter" id="markdown-toc-how-do-i-access-sqlite-in-flutter">How do I access SQLite in Flutter?</a></li>
    </ul>
  </li>
  <li><a href="#notifications" id="markdown-toc-notifications">Notifications</a>    <ul>
      <li><a href="#how-do-i-setup-push-notifications" id="markdown-toc-how-do-i-setup-push-notifications">How do I setup Push Notifications</a></li>
    </ul>
  </li>
</ul>

<h1 id="视图">视图</h1>

<h2 id="android-中的-view-在-flutter-中对应什么">Android 中的 View 在 Flutter 中对应什么？</h2>

<p>在 Android 中，View 是用于在屏幕上显示内容的基础。 如按钮，工具栏和输入框，这一切都是 View。在 Flutter 中对应 View 的是 Widget。然而与 View 相比，Widget 有一些不同之处。首先 Widget 实例仅存在于每一帧之间，并且在每一帧之间 Flutter 都会创建一课 Widget 树。相比之下，在 Android 上绘制 View 的时候，除非调用 <code class="highlighter-rouge">invalidate</code>方法，否则视图不会进行重绘。</p>

<p>不同于 Android 中 View 是可变的，在Flutter 中的 Widget 是不可变的。这种特性使得 Flutter 中的 Widget 变得十分轻量级。</p>

<h2 id="如何更新-widget">如何更新 Widget</h2>

<p>在 Android 中可以直接通过 View 来更新它们的状态。但是在 Flutter 中 Widget 是不可变的，所以不能直接通过 Widget 进行更新，如果需要更新 Widget 必须通过 <code class="highlighter-rouge">State</code>。</p>

<p>所以这里就引出了 <code class="highlighter-rouge">StatefulWidget</code> 和 <code class="highlighter-rouge">StatelessWidget</code>。从字面理解，StatelessWidget 是没有内部状态的即不可变。而 StatefulWidget 具有状态，即是可刷新的。</p>

<p>当您构建的 UI 元素中有些部分是不变的，那么使用 StatelessWidget 是一个不错的选择。</p>

<p>例如在 Android 中您通常会将 App 的 logo 通过 ImageView 显示。而 logo 一般不会变，因此对应 Flutter 中您就可以使用 StatelessWidget 来显示您的 logo。</p>

<p>如果您想通过 HTTP 请求后获得的数据或用户交互来刷新 UI 视图，您需要使用 StatefulWidget 然后主动告诉 Flutter 底层 Widget 的状态发生了变化，只有如此 Flutter 才会刷新对应的 Widget。</p>

<p>这里有重要的一点需要注意，StatelessWidget 和 StatefulWidget 的核心内容是一致的，它们都会在每一帧中被重构，不同之处在于 StatefulWidget 有一个 State 对象，它可以为 StatefulWidget 在不同帧之间存储数据。</p>

<p>如果您还是有疑惑的话，只要记住如果一个 Widget 会变化，那么它就是有状态的。但是如果一个子 Widget 是有状态的，但是其父 Widget 是不可变的话也父 Widget 可以是 StatelessWidget 。</p>

<p>接下来看一下如何使用 StatelessWidget。Text 是一个常见的 StatelessWidget。如果您查看其源码的话，会发现 Text 是 StatelessWidget 的一个子类</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>new Text(
  &#39;I like Flutter!&#39;,
  style: new TextStyle(fontWeight: FontWeight.bold),
);</code></pre>

<p>如你所见，Text 没有任何状态信息，它仅仅是用于显示构造函数传递给它的信息。</p>

<p>但是如果想要通过点击一个按钮来改变 ‘I like Flutter!’ ，那该如何实现？</p>

<p>答案是可以使用 StatefulWidget 包裹 Text，并通过点击按钮来刷新 Text 的内容。</p>

<p>代码如下:</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  // Default placeholder text
  String textToShow = &quot;I Like Flutter&quot;;

  void _updateText() {
    setState(() {
      // update the text
      textToShow = &quot;Flutter is Awesome!&quot;;
    });
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new Center(child: new Text(textToShow)),
      floatingActionButton: new FloatingActionButton(
        onPressed: _updateText,
        tooltip: &#39;Update Text&#39;,
        child: new Icon(Icons.update),
      ),
    );
  }
}</code></pre>

<h2 id="如果使用-widget-进行布局呢xml-布局文件在哪里">如果使用 Widget 进行布局呢？XML 布局文件在哪里？</h2>

<p>在 Android 中通常使用 XML 来进行 UI 的布局，但在 Flutter 中 UI 的布局是通过在 dart 文件中构建 Widget 树来实现的。</p>

<p>下面是一个简单的例子用于在屏幕上居中显示一个按钮。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>@override
Widget build(BuildContext context) {
  return new Scaffold(
    appBar: new AppBar(
      title: new Text(&quot;Sample App&quot;),
    ),
    body: new Center(
      child: new MaterialButton(
        onPressed: () {},
        child: new Text(&#39;Hello&#39;),
        padding: new EdgeInsets.only(left: 10.0, right: 10.0),
      ),
    ),
  );
}</code></pre>

<p>您可以在此处查看 Flutter 提供的所有布局:
<a href="http://doc.flutter-dev.cn/widgets/layout/">http://doc.flutter-dev.cn/widgets/layout/</a></p>

<h2 id="如何在布局中添加或移除组件">如何在布局中添加或移除组件</h2>

<p>在 Android 中，您可以通过调用父布局的 addChild 或者 removeChild 来添加或移除视图，但在 Flutter 中 Widget 是不可变的，所以没有 addChild 或 removeChild 方法。相反，您可以传入一个函数，该函数返回一个 子 Widget 给父 Widget。并在该函数中通过一个 bool 值来控制子 Widget 的创建。</p>

<p>下面的例子展示了如果通过点按一个按钮来切换不同的子 Widget:</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  // Default value for toggle
  bool toggle = true;
  void _toggle() {
    setState(() {
      toggle = !toggle;
    });
  }

  _getToggleChild() {
    if (toggle) {
      return new Text(&#39;Toggle One&#39;);
    } else {
      return new MaterialButton(onPressed: () {}, child: new Text(&#39;Toggle Two&#39;));
    }
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new Center(
        child: _getToggleChild(),
      ),
      floatingActionButton: new FloatingActionButton(
        onPressed: _toggle,
        tooltip: &#39;Update Text&#39;,
        child: new Icon(Icons.update),
      ),
    );
  }
}</code></pre>

<h2 id="in-android-i-can-animate-a-view-by-viewanimate-how-can-i-do-that-to-a-widget">In Android, I can Animate a view by View.animate(), how can I do that to a Widget</h2>

<p>In Flutter, animating widgets can be done via the animation library.</p>

<p>In Android you would either create animations via XML or call the .animate()
property on Views, in Flutter you can wrap widgets inside an Animation.</p>

<p>Like Android, in Flutter you have an AnimationController and a
Interpolator which is an extension of the Animation class, for example a
CurvedAnimation. You pass the controller and Animation into an AnimationWidget
and tell the controller to start the animation.</p>

<p>Let’s take a look at how to write a FadeTransition that will Fade in a logo
when you press</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;

void main() {
  runApp(new FadeAppTest());
}

class FadeAppTest extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Fade Demo&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new MyFadeTest(title: &#39;Fade Demo&#39;),
    );
  }
}

class MyFadeTest extends StatefulWidget {
  MyFadeTest({Key key, this.title}) : super(key: key);
  final String title;
  @override
  _MyFadeTest createState() =&gt; new _MyFadeTest();
}

class _MyFadeTest extends State&lt;MyFadeTest&gt; with TickerProviderStateMixin {
  AnimationController controller;
  CurvedAnimation curve;

  @override
  void initState() {
    controller = new AnimationController(duration: const Duration(milliseconds: 2000), vsync: this);
    curve = new CurvedAnimation(parent: controller, curve: Curves.easeIn);
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(widget.title),
      ),
      body: new Center(
          child: new Container(
              child: new FadeTransition(
                  opacity: curve,
                  child: new FlutterLogo(
                    size: 100.0,
                  )))),
      floatingActionButton: new FloatingActionButton(
        tooltip: &#39;Fade&#39;,
        child: new Icon(Icons.brush),
        onPressed: () {
          controller.forward();
        },
      ),
    );
  }
}</code></pre>

<p>See <a href="https://flutter.io/widgets/animation/">https://flutter.io/widgets/animation/</a> and <a href="https://flutter.io/tutorials/animation">https://flutter.io/tutorials/animation</a> for more specific details.</p>

<h2 id="how-do-i-use-a-canvas-to-drawpaint">How do I use a Canvas to draw/paint</h2>

<p>In Android, you would use the Canvas to draw custom shapes to the screen.</p>

<p>Flutter has two classes that will help you draw to the canvas, the CustomPaint
and CustomPainter which implements your algorithm to draw to canvas.</p>

<p>In this popular StackOverFlow answer you can see how
a signature painter is implemented.</p>

<p>See <a href="https://stackoverflow.com/questions/46241071/create-signature-area-for-mobile-app-in-dart-flutter">https://stackoverflow.com/questions/46241071/create-signature-area-for-mobile-app-in-dart-flutter</a></p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;
class SignaturePainter extends CustomPainter {
  SignaturePainter(this.points);
  final List&lt;Offset&gt; points;
  void paint(Canvas canvas, Size size) {
    var paint = new Paint()
      ..color = Colors.black
      ..strokeCap = StrokeCap.round
      ..strokeWidth = 5.0;
    for (int i = 0; i &lt; points.length - 1; i++) {
      if (points[i] != null &amp;&amp; points[i + 1] != null)
        canvas.drawLine(points[i], points[i + 1], paint);
    }
  }
  bool shouldRepaint(SignaturePainter other) =&gt; other.points != points;
}
class Signature extends StatefulWidget {
  SignatureState createState() =&gt; new SignatureState();
}
class SignatureState extends State&lt;Signature&gt; {
  List&lt;Offset&gt; _points = &lt;Offset&gt;[];
  Widget build(BuildContext context) {
    return new GestureDetector(
      onPanUpdate: (DragUpdateDetails details) {
        setState(() {
          RenderBox referenceBox = context.findRenderObject();
          Offset localPosition =
          referenceBox.globalToLocal(details.globalPosition);
          _points = new List.from(_points)..add(localPosition);
        });
      },
      onPanEnd: (DragEndDetails details) =&gt; _points.add(null),
      child: new CustomPaint(painter: new SignaturePainter(_points)),
    );
  }
}
class DemoApp extends StatelessWidget {
  Widget build(BuildContext context) =&gt; new Scaffold(body: new Signature());
}
void main() =&gt; runApp(new MaterialApp(home: new DemoApp()));</code></pre>

<h2 id="how-do-i-build-custom-widgets">How do I build custom Widgets</h2>

<p>In Android, you would typically subclass from a View or a pre-existing
Widget to override and implement methods.</p>

<p>In Flutter building a custom widget is often accomplished by not extending but
composing smaller widgets.</p>

<p>Let’s take a look at how to build a CustomButton that takes in the label in the
constructor. This is achieved by composing it with a RaisedButton, rather than
extending the RaisedButton and overriding and implementing new methods:</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class CustomButton extends StatelessWidget {
  final String label;
  CustomButton(this.label);

  @override
  Widget build(BuildContext context) {
    return new RaisedButton(onPressed: () {}, child: new Text(label));
  }
}</code></pre>

<p>Then you can use this CustomButton just like you would with any other Widget:</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>@override
  Widget build(BuildContext context) {
    return new Center(
      child: new CustomButton(&quot;Hello&quot;),
    );
  }
}</code></pre>

<h1 id="intents">Intents</h1>

<h2 id="what-is-the-equivalent-of-an-intent-in-flutter">What is the equivalent of an Intent in Flutter</h2>

<p>In Android, there are two main use cases for Intents: switching between
Activities, and invoking external components. Flutter on the other hand does
not have the concept of Intents, though if needed Flutter can trigger Intents
through native integration.</p>

<p>To switch between screens in Flutter you can access the router to draw
a new Widget.  There are two core concepts and classes for managing many
screens: Route and Navigator. A Route is an abstraction for a “screen” or
“page” of an app (think Activity), and a Navigator is a widget that manages
routes. A Navigator can push and pop routes to help a user move from screen to
screen.</p>

<p>Like Android where you can declare your Activities inside the
AndroidManifest.xml, in Flutter you can pass in a Map of named routes to the
top level MaterialApp instance</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>void main() {
  runApp(new MaterialApp(
    home: new MyAppHome(), // becomes the route named &#39;/&#39;
    routes: &lt;String, WidgetBuilder&gt; {
      &#39;/a&#39;: (BuildContext context) =&gt; new MyPage(title: &#39;page A&#39;),
      &#39;/b&#39;: (BuildContext context) =&gt; new MyPage(title: &#39;page B&#39;),
      &#39;/c&#39;: (BuildContext context) =&gt; new MyPage(title: &#39;page C&#39;),
    },
  ));
}</code></pre>
<p>Then you can change to this route by getting an hold of the Navigator and
calling this named route.</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>Navigator.of(context).pushNamed(&#39;/b&#39;);</code></pre>

<p>The other popular use-case for Intents is to call external components such as a
Camera or File picker. For this, you would need to create a native platform
integration (or use an existing library)</p>

<p>See [Flutter Plugins] to learn how to build a native platform integration.</p>

<h2 id="how-do-i-handle-incoming-intents-from-external-applications-in-flutter">How do I handle incoming Intents from external applications in Flutter</h2>

<p>Flutter can handle incoming intents from Android by directly talking to the
Android layer and requesting the data that was shared.</p>

<p>In this example we are registering a text share intent, so other apps
can share text to our Flutter app.</p>

<p>The basic flow of this application would be we first handle the shared text
data on Android’s side, and then wait till Flutter requests for the data to
send it via a MethodChannel.</p>

<p>First we register the intent we want to handle in AndroidManifest.xml</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-xml language-xml"><code>&lt;activity
       android:name=&quot;.MainActivity&quot;
       android:launchMode=&quot;singleTop&quot;
       android:theme=&quot;@style/LaunchTheme&quot;
       android:configChanges=&quot;orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection&quot;
       android:hardwareAccelerated=&quot;true&quot;
       android:windowSoftInputMode=&quot;adjustResize&quot;&gt;
       &lt;!-- This keeps the window background of the activity showing
            until Flutter renders its first frame. It can be removed if
            there is no splash screen (such as the default splash screen
            defined in @style/LaunchTheme). --&gt;
       &lt;meta-data
           android:name=&quot;io.flutter.app.android.SplashScreenUntilFirstFrame&quot;
           android:value=&quot;true&quot; /&gt;
       &lt;intent-filter&gt;
           &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;
           &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;
       &lt;/intent-filter&gt;
       &lt;intent-filter&gt;
           &lt;action android:name=&quot;android.intent.action.SEND&quot; /&gt;
           &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
           &lt;data android:mimeType=&quot;text/plain&quot; /&gt;
       &lt;/intent-filter&gt;
   &lt;/activity&gt;</code></pre>

<p>Then in MainActivity you can handle the intent, once we get the shared text
data from the intent, we hold onto it till Flutter requests for it when it’s
all ready to go.</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-java language-java"><code>package com.yourcompany.shared;

import android.content.Intent;
import android.os.Bundle;

import java.nio.ByteBuffer;

import io.flutter.app.FlutterActivity;
import io.flutter.plugin.common.ActivityLifecycleListener;
import io.flutter.plugin.common.MethodCall;
import io.flutter.plugin.common.MethodChannel;
import io.flutter.plugins.GeneratedPluginRegistrant;

public class MainActivity extends FlutterActivity {
    String sharedText;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        GeneratedPluginRegistrant.registerWith(this);
        Intent intent = getIntent();
        String action = intent.getAction();
        String type = intent.getType();

        if (Intent.ACTION_SEND.equals(action) &amp;&amp; type != null) {
            if (&quot;text/plain&quot;.equals(type)) {
                handleSendText(intent); // Handle text being sent
            }
        }

        new MethodChannel(getFlutterView(), &quot;app.channel.shared.data&quot;).setMethodCallHandler(new MethodChannel.MethodCallHandler() {
            @Override
            public void onMethodCall(MethodCall methodCall, MethodChannel.Result result) {
                if (methodCall.method.contentEquals(&quot;getSharedText&quot;)) {
                    result.success(sharedText);
                    sharedText = null;
                }
            }
        });
    }


    void handleSendText(Intent intent) {
        sharedText = intent.getStringExtra(Intent.EXTRA_TEXT);
    }
}</code></pre>

<p>Lastly, in Flutter you can request the data when the the Flutter view is
rendered.</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;
import &#39;package:flutter/services.dart&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample Shared App Handler&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  static const platform = const MethodChannel(&#39;app.channel.shared.data&#39;);
  String dataShared = &quot;No data&quot;;

  @override
  void initState() {
    super.initState();
    getSharedText();
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(body: new Center(child: new Text(dataShared)));
  }

  getSharedText() async {
    var sharedData = await platform.invokeMethod(&quot;getSharedText&quot;);
    if (sharedData != null) {
      setState(() {
        dataShared = sharedData;
      });
    }
  }
}</code></pre>

<h2 id="what-is-the-equivalent-of-startactivityforresult">What is the equivalent of startActivityForResult</h2>

<p>The Navigator class which handles all Routing in Flutter can be used to get a
result back from a route that you have pushed on the stack. This can be done by
await’ing on the Future returned by push. For example if you were to start a
location route which let the user select their location, you could do:</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>Map coordinates = await Navigator.of(context).pushNamed(&#39;/location&#39;);</code></pre>

<p>then inside your location route once the user has selected their location you
can “pop” the stack with the result</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>Navigator.of(context).pop({&quot;lat&quot;:43.821757,&quot;long&quot;:-79.226392});</code></pre>

<h1 id="async-ui">Async UI</h1>

<h2 id="what-is-the-equivalent-of-runonuithread-in-flutter">What is the equivalent of runOnUiThread in Flutter</h2>

<p>Dart is a single-threaded execution model, with support for Isolates
(a way to run Dart code on another thread), an event loop,
and asynchronous programming. Unless you spawn an Isolate,
your Dart code runs in the main UI thread and is driven by an event loop.</p>

<p>For example, you can run network code on the UI thread without causing the UI
to hang:</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>loadData() async {
  String dataURL = &quot;https://jsonplaceholder.typicode.com/posts&quot;;
  http.Response response = await http.get(dataURL);
  setState(() {
    widgets = JSON.decode(response.body);
  });
}</code></pre>

<p>To update the UI you would call setState which would trigger the build method
to run again and update the data.</p>

<p>Here is the full example of loading data asynchronously and displaying it in a
ListView:</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;dart:convert&#39;;

import &#39;package:flutter/material.dart&#39;;
import &#39;package:http/http.dart&#39; as http;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  List widgets = [];

  @override
  void initState() {
    super.initState();

    loadData();
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
        appBar: new AppBar(
          title: new Text(&quot;Sample App&quot;),
        ),
        body: new ListView.builder(
            itemCount: widgets.length,
            itemBuilder: (BuildContext context, int position) {
              return getRow(position);
            }));
  }

  Widget getRow(int i) {
    return new Padding(
        padding: new EdgeInsets.all(10.0),
        child: new Text(&quot;Row ${widgets[i][&quot;title&quot;]}&quot;)
    );
  }

  loadData() async {
    String dataURL = &quot;https://jsonplaceholder.typicode.com/posts&quot;;
    http.Response response = await http.get(dataURL);
    setState(() {
      widgets = JSON.decode(response.body);
    });
  }
}</code></pre>

<h2 id="what-is-the-equivalent-of-an-asynctask-or-intentservice-on-android">What is the equivalent of an AsyncTask or IntentService on Android</h2>

<p>In Android, when you want to access a network resource you would
typically spawn an AsyncTask that would run code outside of the UI thread
to prevent your UI from blocking. The AsyncTask has a thread pool that manages
the threads for you.</p>

<p>Since Flutter is single threaded and runs an event loop (like Node.js), you
don’t have to worry about thread management or spawing AsyncTasks or IntentServices.</p>

<p>To run code asynchronously you can declare the function as an async function
and await on long running tasks in the function</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>loadData() async {
  String dataURL = &quot;https://jsonplaceholder.typicode.com/posts&quot;;
  http.Response response = await http.get(dataURL);
  setState(() {
    widgets = JSON.decode(response.body);
  });
}</code></pre>

<p>This is how you would typically do network or database calls.</p>

<p>On Android, when you extend AsyncTask, you typically override 3 methods,
OnPreExecute, doInBackground and onPostExecute. There is no equivalent to this
pattern in Flutter since you would just await on a long running function and
Dart’s event loop will take care of the rest.</p>

<p>However, there are times where you may be processing a large amount of data and
your UI could hang.</p>

<p>In this case, like AsyncTask, in Flutter it is possible to take advantage of
multiple CPU cores to do long running or computationally intensive tasks. This
is done by using Isolates.</p>

<p>Isolates are a separate execution thread that runs and do not share any memory
with the main execution memory heap. This means you can’t access variables from
the main thread or update your UI by calling setState.</p>

<p>Let’s see an example of a simple Isolate and how you can communicate and share
data back to the main thread to update your UI.</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>loadData() async {
    ReceivePort receivePort = new ReceivePort();
    await Isolate.spawn(dataLoader, receivePort.sendPort);

    // The &#39;echo&#39; isolate sends it&#39;s SendPort as the first message
    SendPort sendPort = await receivePort.first;

    List msg = await sendReceive(sendPort, &quot;https://jsonplaceholder.typicode.com/posts&quot;);

    setState(() {
      widgets = msg;
    });
  }

// the entry point for the isolate
  static dataLoader(SendPort sendPort) async {
    // Open the ReceivePort for incoming messages.
    ReceivePort port = new ReceivePort();

    // Notify any other isolates what port this isolate listens to.
    sendPort.send(port.sendPort);

    await for (var msg in port) {
      String data = msg[0];
      SendPort replyTo = msg[1];

      String dataURL = data;
      http.Response response = await http.get(dataURL);
      // Lots of JSON to parse
      replyTo.send(JSON.decode(response.body));
    }
  }

  Future sendReceive(SendPort port, msg) {
    ReceivePort response = new ReceivePort();
    port.send([msg, response.sendPort]);
    return response.first;
  }</code></pre>

<p>“dataLoader” is the Isolate that runs in its own seperate execution thread,
where you can do more CPU intensive processing, for example parsing a lot of
JSON - 10k+ lines, or doing computationally intensive math.</p>

<p>A full example that you can run is below.</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;dart:convert&#39;;

import &#39;package:flutter/material.dart&#39;;
import &#39;package:http/http.dart&#39; as http;
import &#39;dart:async&#39;;
import &#39;dart:isolate&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  List widgets = [];

  @override
  void initState() {
    super.initState();
    loadData();
  }

  showLoadingDialog() {
    if (widgets.length == 0) {
      return true;
    }

    return false;
  }

  getBody() {
    if (showLoadingDialog()) {
      return getProgressDialog();
    } else {
      return getListView();
    }
  }

  getProgressDialog() {
    return new Center(child: new CircularProgressIndicator());
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
        appBar: new AppBar(
          title: new Text(&quot;Sample App&quot;),
        ),
        body: getBody());
  }

  ListView getListView() =&gt; new ListView.builder(
      itemCount: widgets.length,
      itemBuilder: (BuildContext context, int position) {
        return getRow(position);
      });

  Widget getRow(int i) {
    return new Padding(padding: new EdgeInsets.all(10.0), child: new Text(&quot;Row ${widgets[i][&quot;title&quot;]}&quot;));
  }

  loadData() async {
    ReceivePort receivePort = new ReceivePort();
    await Isolate.spawn(dataLoader, receivePort.sendPort);

    // The &#39;echo&#39; isolate sends it&#39;s SendPort as the first message
    SendPort sendPort = await receivePort.first;

    List msg = await sendReceive(sendPort, &quot;https://jsonplaceholder.typicode.com/posts&quot;);

    setState(() {
      widgets = msg;
    });
  }

// the entry point for the isolate
  static dataLoader(SendPort sendPort) async {
    // Open the ReceivePort for incoming messages.
    ReceivePort port = new ReceivePort();

    // Notify any other isolates what port this isolate listens to.
    sendPort.send(port.sendPort);

    await for (var msg in port) {
      String data = msg[0];
      SendPort replyTo = msg[1];

      String dataURL = data;
      http.Response response = await http.get(dataURL);
      // Lots of JSON to parse
      replyTo.send(JSON.decode(response.body));
    }
  }

  Future sendReceive(SendPort port, msg) {
    ReceivePort response = new ReceivePort();
    port.send([msg, response.sendPort]);
    return response.first;
  }

}</code></pre>

<h2 id="what-is-the-equivalent-of-okhttp-on-flutter">What is the equivalent of OkHttp on Flutter</h2>

<p>Making a network call in Flutter is easy when you use the popular “http” package.</p>

<p>While the http package does not have all the features OkHttp has implemented,
the “http” package abstracts away a lot of the networking that you would normally
implement yourself, making it a simple way to make network calls.</p>

<p><a href="https://pub.dartlang.org/packages/http">https://pub.dartlang.org/packages/http</a></p>

<p>You can use it by adding it to your dependencies in pubspec.yaml</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-yaml language-yaml"><code>dependencies:
  ...
  http: &#39;&gt;=0.11.3+12&#39;</code></pre>

<p>Then to make a network call, for example to this JSON GIST on GitHub you can call:</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;dart:convert&#39;;

import &#39;package:flutter/material.dart&#39;;
import &#39;package:http/http.dart&#39; as http;
[...]
  loadData() async {
    String dataURL = &quot;https://jsonplaceholder.typicode.com/posts&quot;;
    http.Response response = await http.get(dataURL);
    setState(() {
      widgets = JSON.decode(response.body);
    });
  }
}</code></pre>

<p>Once you have the result you can tell Flutter to update its state by calling
setState, which will update your UI with the result from your network call.</p>

<h2 id="how-do-i-show-progress-indicator-in-flutter-when-there-is-a-task-that-is-running">How do I show progress indicator in Flutter when there is a task that is running</h2>

<p>In Android you would typically show a progress indicator when you execute
a long running task.</p>

<p>In Flutter this can be done by rendering a Progress Indicator widget. You can
show the Progress Indicator programmatically by controlling when its rendered
through a boolean and telling Flutter to update it’s state before your long running task.</p>

<p>In the example below, we break up the build function into three different
functions. If showLoadingDialog is true (when widgets.length == 0) then we
render the ProgressIndicator, else we render the ListView with all the data.</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;dart:convert&#39;;

import &#39;package:flutter/material.dart&#39;;
import &#39;package:http/http.dart&#39; as http;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  List widgets = [];

  @override
  void initState() {
    super.initState();
    loadData();
  }

  showLoadingDialog() {
    if (widgets.length == 0) {
      return true;
    }

    return false;
  }

  getBody() {
    if (showLoadingDialog()) {
      return getProgressDialog();
    } else {
      return getListView();
    }
  }

  getProgressDialog() {
    return new Center(child: new CircularProgressIndicator());
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
        appBar: new AppBar(
          title: new Text(&quot;Sample App&quot;),
        ),
        body: getBody());
  }

  ListView getListView() =&gt; new ListView.builder(
      itemCount: widgets.length,
      itemBuilder: (BuildContext context, int position) {
        return getRow(position);
      });

  Widget getRow(int i) {
    return new Padding(padding: new EdgeInsets.all(10.0), child: new Text(&quot;Row ${widgets[i][&quot;title&quot;]}&quot;));
  }

  loadData() async {
    String dataURL = &quot;https://jsonplaceholder.typicode.com/posts&quot;;
    http.Response response = await http.get(dataURL);
    setState(() {
      widgets = JSON.decode(response.body);
    });
  }
}</code></pre>

<h1 id="project-structure--resources">Project Structure &amp; Resources</h1>

<h2 id="where-do-i-store-my-resolution-dependent-image-files-hdpixxhdpi">Where do I store my resolution dependent image files? HDPI/XXHDPI</h2>

<p>Flutter follows a simple 3 resolution format like iOS. 1x, 2x, and 3x.</p>

<p>Create a folder called images and for each of your image files, generate a @2x
and @3x variant and place them in the folder like such</p>

<ul>
  <li>
    <p>…/my_icon.png</p>
  </li>
  <li>…/2.0x/my_icon.png</li>
  <li>…/3.0x/my_icon.png</li>
</ul>

<p>Then you would need to declare these images in your pubspec.yaml file</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-yaml language-yaml"><code>assets:
 - images/a_dot_burr.jpeg
 - images/a_dot_ham.jpeg</code></pre>

<p>You can then access your images using AssetImage</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>return new AssetImage(&quot;images/a_dot_burr.jpeg&quot;);</code></pre>

<h2 id="where-do-i-store-strings-how-do-i-store-different-locales">Where do I store strings? How do I store different locales</h2>

<p>At the moment, best practice is to create a class called Strings, for example</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class Strings{
  static String welcomeMessage = &quot;Welcome To Flutter&quot;;
}</code></pre>

<p>Then in your code, you can access your Strings as such</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>new Text(Strings.welcomeMessage)</code></pre>

<p>Flutter has basic support for accessibility on Android, though this feature is
a work in progress.</p>

<p>Flutter developers are encouraged to use the <a href="https://pub.dartlang.org/packages/intl">intl
package</a> for internationalization and
localization.</p>

<h2 id="what-is-the-equivalent-of-a-gradle-file-to-add-my-external-dependencies">What is the equivalent of a Gradle file to add my external dependencies</h2>

<p>In Android, you add dependencies by adding to your Gradle file located in your
Android project.</p>

<p>In Flutter while there are Gradle files under the Android folder in your
Flutter project, you would only use these if you are adding dependencies needed
for platform integration. Otherwise, you can use pubspec.yaml to declare
external dependencies specific to Flutter.</p>

<p>A good place to find great packages for flutter is <a href="https://pub.dartlang.org/flutter/packages/">Pub</a></p>

<h1 id="activities-and-fragments">Activities and Fragments</h1>

<h2 id="what-are-the-equivalent-of-activities-and-fragments">What are the equivalent of activities and fragments</h2>

<p>In Android, an Activity represents a single focused thing the user can do. A
Fragment represents a way to modularize your code, build more
sophisticated user interfaces for larger screens, and help scale your
application between small and large screens. In Flutter both of these concepts
fall under the concept of a Widget.</p>

<h2 id="how-do-i-listen-to-android-activity-lifecycle-events">How do I listen to Android Activity lifecycle events</h2>

<p>In Android you can override methods from the Activity to capture lifecycle
methods for the Activity.</p>

<p>In Flutter You can listen to lifecycle events by hooking into the WidgetsBinding
observer and listening to the didChangeAppLifecycleState change event.</p>

<p>The lifecycle events you can observe are</p>

<ul>
  <li>resumed - The application is visible and responding to user input. This is
onResume from Android</li>
  <li>inactive - The application is in an inactive state and is not receiving user
input. This event is unused on Android and only works with iOS.</li>
  <li>paused - The application is not currently visible to the user, not responding
to user input, and running in the background. This is onPause from Android</li>
  <li>suspending - The application will be suspended momentarily. This is unused on
iOS</li>
</ul>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/widgets.dart&#39;;

class LifecycleWatcher extends StatefulWidget {
  @override
  _LifecycleWatcherState createState() =&gt; new _LifecycleWatcherState();
}

class _LifecycleWatcherState extends State&lt;LifecycleWatcher&gt; with WidgetsBindingObserver {
  AppLifecycleState _lastLifecyleState;

  @override
  void initState() {
    super.initState();
    WidgetsBinding.instance.addObserver(this);
  }

  @override
  void dispose() {
    WidgetsBinding.instance.removeObserver(this);
    super.dispose();
  }

  @override
  void didChangeAppLifecycleState(AppLifecycleState state) {
    setState(() {
      _lastLifecyleState = state;
    });
  }

  @override
  Widget build(BuildContext context) {
    if (_lastLifecyleState == null)
      return new Text(&#39;This widget has not observed any lifecycle changes.&#39;, textDirection: TextDirection.ltr);
    return new Text(&#39;The most recent lifecycle state this widget observed was: $_lastLifecyleState.&#39;,
        textDirection: TextDirection.ltr);
  }
}

void main() {
  runApp(new Center(child: new LifecycleWatcher()));
}</code></pre>

<h1 id="layouts">Layouts</h1>

<h2 id="what-is-the-equivalent-of-a-linearlayout">What is the equivalent of a LinearLayout</h2>

<p>In Android, a LinearLayout is used to lay your widgets out linearly
-horizontally or vertically. In Flutter, you can use the Row widget or Column
widget to achieve the same result.</p>

<p>If you notice the two code samples are identical with the exception of the
“Row” and “Column” widget. The children are the same and this feature can be
exploited to develop rich layouts that can change overtime with the same
children.</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>@override
Widget build(BuildContext context) {
  return new Row(
    mainAxisAlignment: MainAxisAlignment.center,
    children: &lt;Widget&gt;[
      new Text(&#39;Row One&#39;),
      new Text(&#39;Row Two&#39;),
      new Text(&#39;Row Three&#39;),
      new Text(&#39;Row Four&#39;),
    ],
  );
}</code></pre>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>@override
Widget build(BuildContext context) {
  return new Column(
    mainAxisAlignment: MainAxisAlignment.center,
    children: &lt;Widget&gt;[
      new Text(&#39;Column One&#39;),
      new Text(&#39;Column Two&#39;),
      new Text(&#39;Column Three&#39;),
      new Text(&#39;Column Four&#39;),
    ],
  );
}</code></pre>

<h2 id="what-is-the-equivalent-of-a-relativelayout">What is the equivalent of a RelativeLayout</h2>

<p>A RelativeLayout is used to lay your widgets out relative to each other. In
Flutter there are a few ways to achieve the same result.</p>

<p>You can achieve the result of a RelativeLayout by using a combination of
Column, Row, and Stack widgets. You can specify rules for the widgets
constructors on how the children are laid out relative to the parent.</p>

<p>A good example of building a RelativeLayout in Flutter is on StackOverflow
<a href="https://stackoverflow.com/questions/44396075/equivalent-of-relativelayout-in-flutter">https://stackoverflow.com/questions/44396075/equivalent-of-relativelayout-in
-flutter</a></p>

<h2 id="what-is-the-equivalent-of-a-scrollview">What is the equivalent of a ScrollView</h2>

<p>In Android a ScrollView lets you lay your widgets such that if the users’
device has a smaller screen than your content, they can scroll.</p>

<p>In Flutter the easiest way to do this is using the ListView widget. This might
seem like overkill coming from Android, but in Flutter a ListView widget is
both a ScrollView and an Android ListView.</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>@override
Widget build(BuildContext context) {
  return new ListView(
    children: &lt;Widget&gt;[
      new Text(&#39;Row One&#39;),
      new Text(&#39;Row Two&#39;),
      new Text(&#39;Row Three&#39;),
      new Text(&#39;Row Four&#39;),
    ],
  );
}</code></pre>

<h1 id="gesture-detection-and-touch-event-handling">Gesture Detection and Touch Event Handling</h1>

<h2 id="how-do-i-add-an-onclick-listener-to-a-widget-in-flutter">How do I add an onClick listener to a widget in Flutter</h2>

<p>In Android, you can attach onClick to views such as button by calling
the method ‘setOnClickListener’.</p>

<p>In Flutter there are two ways of adding touch listeners</p>

<ol>
  <li>
    <p>If the Widget has support for event detection you can just pass in a
  function to it and handle it. For example, the RaisedButton has an onPressed
  parameter</p>

    <!-- skip -->
  </li>
</ol>
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>@override
Widget build(BuildContext context) {
  return new RaisedButton(
      onPressed: () {
        print(&quot;click&quot;);
      },
      child: new Text(&quot;Button&quot;));
}</code></pre>

<ol>
  <li>
    <p>If the Widget does not have support for event detection, you can wrap up the
  widget in a GestureDetector and pass in a function to the onTap parameter.</p>

    <!-- skip -->
  </li>
</ol>
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class SampleApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new Scaffold(
        body: new Center(
      child: new GestureDetector(
        child: new FlutterLogo(
          size: 200.0,
        ),
        onTap: () {
          print(&quot;tap&quot;);
        },
      ),
    ));
  }
}</code></pre>

<h2 id="how-do-i-handle-other-gestures-on-widgets">How do I handle other gestures on widgets</h2>

<p>Using the GestureDetector we can listen to a wide range of Gestures such as</p>

<ul>
  <li>
    <p>Tap</p>

    <ul>
      <li><code class="highlighter-rouge">onTapDown</code> A pointer that might cause a tap has contacted the screen at a
particular location.</li>
      <li><code class="highlighter-rouge">onTapUp</code> A pointer that will trigger a tap has stopped contacting the
screen at a particular location.</li>
      <li><code class="highlighter-rouge">onTap</code> A tap has occurred.</li>
      <li><code class="highlighter-rouge">onTapCancel</code> The pointer that previously triggered the <code class="highlighter-rouge">onTapDown</code> will
not end up causing a tap.</li>
    </ul>
  </li>
  <li>
    <p>Double tap</p>

    <ul>
      <li><code class="highlighter-rouge">onDoubleTap</code> The user has tapped the screen at the same location twice in
quick succession.</li>
    </ul>
  </li>
  <li>
    <p>Long press</p>

    <ul>
      <li><code class="highlighter-rouge">onLongPress</code> A pointer has remained in contact with the screen at the same
location for a long period of time.</li>
    </ul>
  </li>
  <li>
    <p>Vertical drag</p>

    <ul>
      <li><code class="highlighter-rouge">onVerticalDragStart</code> A pointer has contacted the screen and might begin to
move vertically.</li>
      <li><code class="highlighter-rouge">onVerticalDragUpdate</code> A pointer that is in contact with the screen and
moving vertically has moved in the vertical direction.</li>
      <li><code class="highlighter-rouge">onVerticalDragEnd</code> A pointer that was previously in contact with the
screen and moving vertically is no longer in contact with the screen and was
moving at a specific velocity when it stopped contacting the screen.</li>
    </ul>
  </li>
  <li>
    <p>Horizontal drag</p>

    <ul>
      <li><code class="highlighter-rouge">onHorizontalDragStart</code> A pointer has contacted the screen and might begin
to move horizontally.</li>
      <li><code class="highlighter-rouge">onHorizontalDragUpdate</code> A pointer that is in contact with the screen and
moving horizontally has moved in the horizontal direction.</li>
      <li><code class="highlighter-rouge">onHorizontalDragEnd</code> A pointer that was previously in contact with the
screen and moving horizontally is no longer in contact with the screen and was
moving at a specific velocity when it stopped contacting the screen.</li>
    </ul>
  </li>
</ul>

<p>For example here is a GestureDetector for double tap on the FlutterLogo that
will make it rotate</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>AnimationController controller;
CurvedAnimation curve;

@override
void initState() {
  controller = new AnimationController(duration: const Duration(milliseconds: 2000), vsync: this);
  curve = new CurvedAnimation(parent: controller, curve: Curves.easeIn);
}

class SampleApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new Scaffold(
        body: new Center(
          child: new GestureDetector(
            child: new RotationTransition(
                turns: curve,
                child: new FlutterLogo(
                  size: 200.0,
                )),
            onDoubleTap: () {
              if (controller.isCompleted) {
                controller.reverse();
              } else {
                controller.forward();
              }
            },
        ),
    ));
  }
}</code></pre>

<h1 id="listviews--adapters">Listviews &amp; Adapters</h1>

<h2 id="what-is-the-alternative-to-a-listview-in-flutter">What is the alternative to a ListView in Flutter</h2>

<p>The equivalent to a ListView in Flutter is … a ListView!</p>

<p>In an Android ListView, you create an adapter that you can then pass into the
ListView which will render each row with what your adapter returns. However you
have to make sure you recycle your rows , otherwise, you get all sorts of crazy
visual glitches and memory issues.</p>

<p>In Flutter, due to Flutters immutable widget pattern, you pass in a List of
Widgets to your ListView and Flutter will take care of making sure they are
scrolling fast and smooth.</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new ListView(children: _getListData()),
    );
  }

  _getListData() {
    List&lt;Widget&gt; widgets = [];
    for (int i = 0; i &lt; 100; i++) {
      widgets.add(new Padding(padding: new EdgeInsets.all(10.0), child: new Text(&quot;Row $i&quot;)));
    }
    return widgets;
  }
}</code></pre>

<h2 id="how-do-i-know-which-list-item-is-clicked-on">How do I know which list item is clicked on</h2>

<p>In Android, the ListView has a method to find out which item was clicked
‘onItemClickListener’. Flutter makes it easier by letting you just use the
touch handling that the widgets you passed in have.</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new ListView(children: _getListData()),
    );
  }

  _getListData() {
    List&lt;Widget&gt; widgets = [];
    for (int i = 0; i &lt; 100; i++) {
      widgets.add(new GestureDetector(
        child: new Padding(
            padding: new EdgeInsets.all(10.0),
            child: new Text(&quot;Row $i&quot;)),
        onTap: () {
          print(&#39;row tapped&#39;);
        },
      ));
    }
    return widgets;
  }
}</code></pre>

<h2 id="how-do-i-update-listviews-dynamically">How do I update ListView’s dynamically</h2>

<p>On Android, you would update the adapter and call notifyDataSetChanged. In
Flutter if you were to update the list of widgets inside a setState(), you
would quickly see that your data did not change visually.</p>

<p>This is because when setState is called, the Flutter rendering engine will go
through all the widgets to see if they have changed. When it gets to your
ListView it will do a <code class="highlighter-rouge">==operator</code> and see that the two ListViews are the same
and nothing has changed, hence no update to the data.</p>

<p>To update your ListView then is to create a new List() inside of setState and
copy over all the old data to the new list. This is a simple way to achieve an
update.</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  List widgets = [];

  @override
  void initState() {
    super.initState();
    for (int i = 0; i &lt; 100; i++) {
      widgets.add(getRow(i));
    }
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new ListView(children: widgets),
    );
  }

  Widget getRow(int i) {
    return new GestureDetector(
      child: new Padding(
          padding: new EdgeInsets.all(10.0),
          child: new Text(&quot;Row $i&quot;)),
      onTap: () {
        setState(() {
          widgets = new List.from(widgets);
          widgets.add(getRow(widgets.length + 1));
          print(&#39;row $i&#39;);
        });
      },
    );
  }
}</code></pre>

<p>However the recommended, efficient, and effective way is to use a
ListView.Builder. This method is great when you have a dynamic
List or a List with very large amounts of data. This is essentially
the equivalent of using RecyclerView on Android which automatically
recycles list elements for you:</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  List widgets = [];

  @override
  void initState() {
    super.initState();
    for (int i = 0; i &lt; 100; i++) {
      widgets.add(getRow(i));
    }
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
        appBar: new AppBar(
          title: new Text(&quot;Sample App&quot;),
        ),
        body: new ListView.builder(
            itemCount: widgets.length,
            itemBuilder: (BuildContext context, int position) {
              return getRow(position);
            }));
  }

  Widget getRow(int i) {
    return new GestureDetector(
      child: new Padding(
          padding: new EdgeInsets.all(10.0),
          child: new Text(&quot;Row $i&quot;)),
      onTap: () {
        setState(() {
          widgets.add(getRow(widgets.length + 1));
          print(&#39;row $i&#39;);
        });
      },
    );
  }
}</code></pre>

<p>Instead of creating a “new ListView” we create a new ListView.builder which
takes two key parameters, the initial length of the list and an ItemBuilder
function.</p>

<p>The ItemBuilder function is a lot like the getView function in an Android
adapter, it takes in a position and you return the row you want rendered for
that position.</p>

<p>Lastly, but most important, if you notice the onTap function, we don’t recreate
the List anymore and instead just .add to it.</p>

<h1 id="working-with-text">Working with Text</h1>

<h2 id="how-do-i-set-custom-fonts-on-my-text-widgets">How do I set custom fonts on my Text widgets</h2>

<p>In Android SDK (as of Android O), you would create a Font resource file and
pass it into the FontFamily param for your TextView.</p>

<p>In Flutter first you need to take your font file and place in folder in your
project (best practice is to create a folder called assets).</p>

<p>Next in your pubspec.yaml file you would declare the fonts</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-yaml language-yaml"><code>fonts:
   - family: MyCustomFont
     fonts:
       - asset: fonts/MyCustomFont.ttf
       - style: italic</code></pre>

<p>and lastly you would assign the font to your Text widget</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>@override
Widget build(BuildContext context) {
  return new Scaffold(
    appBar: new AppBar(
      title: new Text(&quot;Sample App&quot;),
    ),
    body: new Center(
      child: new Text(
        &#39;This is a custom font text&#39;,
        style: new TextStyle(fontFamily: &#39;MyCustomFont&#39;),
      ),
    ),
  );
}</code></pre>

<h2 id="how-do-i-style-my-text-widgets">How do I style my Text widgets</h2>

<p>Along with customizing fonts you can customize a lot of different styles on a
Text widget.</p>

<p>The style parameter of a Text widget takes a TextStyle object, where you can
customize many parameters such as</p>

<ul>
  <li>color</li>
  <li>decoration</li>
  <li>decorationColor</li>
  <li>decorationStyle</li>
  <li>fontFamily</li>
  <li>fontSize</li>
  <li>fontStyle</li>
  <li>fontWeight</li>
  <li>hashCode</li>
  <li>height</li>
  <li>inherit</li>
  <li>letterSpacing</li>
  <li>textBaseline</li>
  <li>wordSpacing</li>
</ul>

<h1 id="form-input">Form Input</h1>

<h2 id="what-is-the-equivalent-of-a-hint-on-an-input">What is the equivalent of a “hint” on an Input</h2>

<p>In Flutter you can easily show a “hint” or a placeholder text for your input by
adding an InputDecoration object to the decoration constructor parameter for
the Text Widget</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>body: new Center(
  child: new TextField(
    decoration: new InputDecoration(hintText: &quot;This is a hint&quot;),
  )
)</code></pre>

<h2 id="how-do-i-show-validation-errors">How do I show validation errors</h2>

<p>Just like how you would with a “hint”, you can pass in a InputDecoration object
to the decoration constructor for the Text widget.</p>

<p>However, you would not want to start off with showing an error and typically
would want to show it when the user has entered some invalid data. This can be
done by updating the state and passing in a new InputDecoration object.</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  String _errorText;

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new Center(
        child: new TextField(
          onSubmitted: (String text) {
            setState(() {
              if (!isEmail(text)) {
                _errorText = &#39;Error: This is not an email&#39;;
              } else {
                _errorText = null;
              }
            });
          },
          decoration: new InputDecoration(hintText: &quot;This is a hint&quot;, errorText: _getErrorText()),
        ),
      ),
    );
  }

  _getErrorText() {
    return _errorText;
  }

  bool isEmail(String em) {
    String emailRegexp =
        r&#39;^(([^&lt;&gt;()[\]\\.,;:\s@\&quot;]+(\.[^&lt;&gt;()[\]\\.,;:\s@\&quot;]+)*)|(\&quot;.+\&quot;))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$&#39;;

    RegExp regExp = new RegExp(p);

    return regExp.hasMatch(em);
  }
}</code></pre>

<h1 id="flutter-plugins">Flutter Plugins</h1>

<h2 id="how-do-i-access-the-gps-sensor">How do I access the GPS sensor</h2>

<p>To access the GPS sensor you can use the community plugin
<a href="https://pub.dartlang.org/packages/location">https://pub.dartlang.org/packages/location</a></p>

<h2 id="how-do-i-access-the-camera">How do I access the Camera</h2>

<p>A popular community plugin to access the camera is
<a href="https://pub.dartlang.org/packages/image_picker">https://pub.dartlang.org/packages/image_picker</a></p>

<h2 id="how-do-i-log-in-with-facebook">How do I log in with Facebook</h2>

<p>To access Facebook Connect functionality you can use
<a href="https://pub.dartlang.org/packages/flutter_facebook_connect">https://pub.dartlang.org/packages/flutter_facebook_connect</a> .</p>

<h2 id="how-do-i-build-my-own-custom-native-integrations">How do I build my own custom native integrations</h2>

<p>If there is platform specific functionality that Flutter or its community
Plugins are missing then you can build your own following this tutorial
<a href="https://flutter.io/developing-packages/">https://flutter.io/developing-packages/</a> .</p>

<p>Flutter’s plugin architecture in a nutshell is a lot like using an Event bus in
Android: you fire off a message and let the receiver process and emit a result
back to you, in this case the receiver would be iOS or Android.</p>

<h2 id="how-do-i-use-the-ndk-in-my-flutter-application">How do I use the NDK in my Flutter application</h2>

<p>If you use the NDK in your current Android application and want your Flutter
application to take advantage of your native libraries then it’s possible by
building a custom plugin.</p>

<p>Your custom plugin would first talk to your Android app, where you would be
able to call your <code class="highlighter-rouge">native</code> marked functions. Once a response is ready, you
would be able to send a message back to Flutter and render the result.</p>

<h1 id="themes">Themes</h1>

<h2 id="how-do-i-theme-my-material-styled-app">How do I theme my Material-styled app</h2>

<p>Flutter out of the box comes with a beautiful implementation of Material
Design, which takes care of a lot of styling and theming needs that you would
typically do. Unlike Android where you declare themes in XML and then assign it
to your application via AndroidManifest.xml, in Flutter you can declare themes
via the top level widget.</p>

<p>To take full advantage of Material Components in your app, you can declare a top
level widget <code class="highlighter-rouge">MaterialApp</code> as the entry point to your application. MaterialApp
is a convenience widget that wraps a number of widgets that are commonly
required for applications implementing Material Design. It builds upon a WidgetsApp by
adding Material specific functionality.</p>

<p>If you don’t want to use Material Components, then you can declare a top level
widget <code class="highlighter-rouge">WidgetsApp</code> which is a convenience class that wraps a number of widgets
that are commonly required for an application</p>

<p>To customize the colors and styles of Material Components you can pass in a
ThemeData object to the MaterialApp widget, for example in the code below you
can see the primary swatch is set to blue and all text selection color should
be red.</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class SampleApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
        textSelectionColor: Colors.red
      ),
      home: new SampleAppPage(),
    );
  }
}</code></pre>

<h1 id="databases-and-local-storage">Databases and local storage</h1>

<h2 id="how-do-i-access-shared-preferences-in-flutter">How do I access Shared Preferences in Flutter?</h2>
<p>In Android, you can store a small collection of key-value pairs by using
the SharedPreferences API.</p>

<p>In Flutter, you can access this functionality by using the
Shared Preferences plugin <a href="https://pub.dartlang.org/packages/shared_preferences">Shared_Preferences</a></p>

<p>This plugin wraps the functionality of both Shared Preferences and 
NSUserDefaults (the iOS equivalent).</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;
import &#39;package:shared_preferences/shared_preferences.dart&#39;;

void main() {
  runApp(
    new MaterialApp(
      home: new Scaffold(
        body: new Center(
          child: new RaisedButton(
            onPressed: _incrementCounter,
            child: new Text(&#39;Increment Counter&#39;),
          ),
        ),
      ),
    ),
  );
}

_incrementCounter() async {
  SharedPreferences prefs = await SharedPreferences.getInstance();
  int counter = (prefs.getInt(&#39;counter&#39;) ?? 0) + 1;
  print(&#39;Pressed $counter times.&#39;);
  prefs.setInt(&#39;counter&#39;, counter);
}</code></pre>

<h2 id="how-do-i-access-sqlite-in-flutter">How do I access SQLite in Flutter?</h2>
<p>In Android, you would use SQLite to store structured data that you can query 
via SQL.</p>

<p>In Flutter, you can access this functionality by using the SQFlite plugin 
<a href="https://pub.dartlang.org/packages/sqflite">SQFlite</a></p>

<h1 id="notifications">Notifications</h1>

<h2 id="how-do-i-setup-push-notifications">How do I setup Push Notifications</h2>
<p>In Android, you would use Firebase Cloud Messaging to setup push 
notifications for your app.</p>

<p>In Flutter, you can access this functionality by using the Firebase_Messaging
plugin <a href="https://github.com/flutter/plugins/tree/master/packages/firebase_messaging">Firebase_Messaging</a></p>


</article>

          </div>
        </div>

        

      </div> <!-- /.row -->
    </div> <!-- /.container -->

    <footer class="site-footer">
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-12">
        <div class="logo">
          <img src="/images/flutter-mark-square-100.png" alt="Flutter Logo" width="100" height="100">
        </div>
        <p class="site-footer__link-list">
          <a href="https://groups.google.com/forum/#!forum/flutter-dev">flutter-dev@</a> &bull;
          <a href="https://twitter.com/flutterio">twitter</a> &bull;
          <a href="https://github.com/flutter/">github</a> &bull;
          <a href="/tos">terms</a> &bull;
          <a href="https://www.google.com/intl/en/policies/privacy/">privacy</a> &bull;
          <a href="https://github.com/orgs/flutter-dev/teams/flutter/">翻译组</a>
        </p>

        <p class="licenses">
          除非另有说明，否则本作品根据
          <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">知识共享署名 4.0 国际许可证</a>进行许可，代码示例已根据 BSD 许可证进行许可。
        </p>
      </div>
    </div>
  </div>
</footer>

    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="/js/sidebar_toggle.js"></script>
    <script src="/js/customscripts.js"></script>
    <script src="/js/prism.js"></script>
    <script src="/js/tabs.js"></script>
    
    <script async="" defer="" src="//survey.g.doubleclick.net/async_survey?site=at3ul57xpub2vk3oxt2ytw365i"></script>
  </body>
</html>
