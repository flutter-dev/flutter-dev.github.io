<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>iOS 开发者参考  - Flutter </title>
  <link rel="shortcut icon" href="/images/favicon.png">

  <meta name="description" content="">
  <meta name="keywords" content=" ">

  <link rel="stylesheet" href="/css/lavish-bootstrap.css">
  <link rel="stylesheet" href="/css/main.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Extended" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro%7CRoboto:500,400italic,300,400" rel="stylesheet">
  
  <link rel="canonical" href="http://localhost:4000/flutter-for-ios/">

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-67589403-1', 'auto');
    ga('send', 'pageview');
  </script>

  <meta name="google-site-verification" content="HFqxhSbf9YA_0rBglNLzDiWnrHiK_w4cqDh2YD2GEY4" />
</head>


  <body class="">

    <div id="overlay-under-drawer"><!-- for the drawer on narrow screens --></div>

    <header class="site-header">
  <div class="container-fluid header-contents">
    <div class="row">
      <div class="col-md-12">
        <i class="fa fa-bars" id="sidebar-toggle-button" aria-hidden="true" style="display:none"></i>
        <img src="/images/flutter-mark-square-100.png" alt="Flutter Logo" width="40" height="40" style="vertical-align:middle">

        <a class="site-title" href="/">Flutter</a>

        <nav class="site-nav">
          <a href="#" class="menu-icon">
            <i class="material-icons-extended">more_vert</i>
          </a>
          <div class="trigger">
            <a class="page-link" href="/docs/">文档</a>
            <a class="page-link" href="https://github.com/flutter/flutter">GitHub</a>
            <a class="page-link" href="https://pub.dartlang.org/flutter">库</a>
            <a class="page-link" href="/support/">支持</a>
            <a class="page-link" href="http://flutter-dev.cn">论坛</a>
            <form action="/search/" class="nav-searchbox" id="cse-search-box" style="display: inline">
              <input type="hidden" name="cx" value="007067728241810524621:gm6vraqlc8c">
              <input type="hidden" name="ie" value="UTF-8">
              <input type="hidden" name="hl" value="en">
              <input type="search" name="q" id="q" autocomplete="off" placeholder="搜索">
            </form>
          </div>
        </nav>
      </div>
    </div> <!-- /.row -->
  </div> <!-- /.container -->
</header>


    <!-- Page Content -->
    <div class="container-fluid contents">
      <!-- Content Row -->
      <div class="row">

        <!-- Sidebar Column -->
        <div id="side-nav-container" class="col-sm-3">
          <ul id="mysidebar" class="nav">

  <li class="sidebar-title">入门</li>

    <ul class="sidebar-items">
      <li><a href="/get-started/install/">1: 安装</a></li>
      <li><a href="/get-started/editor/">2: 配置编辑器</a></li>
      <li><a href="/get-started/test-drive/">3: Flutter 初体验</a></li>
      <li><a href="/get-started/codelab/">4: 编写第一个 Flutter 应用</a></li>
      <li><a href="/get-started/learn-more/">5: 学习更多</a></li>
    </ul>

  <li class="sidebar-title">构建 UI</li>

    <ul class="sidebar-items">
      <li><a href="/widgets-intro/">框架预览</a></li>
      <li><a href="/widgets/">Widget 目录</a></li>
      <li><a href="/cookbook/">小案例</a></li>
      <li><a href="/catalog/samples/">示例目录</a></li>
      <li><a href="/codelabs">Codelab</a></li>
      <li><a href="/tutorials/layout/">构建布局 - 教程</a></li>
      <li><a href="/tutorials/interactive/">添加交互 - 教程</a></li>
      <li><a href="/web-analogs/"> Web 开发者参考</a></li>
      <li><a href="/flutter-for-android/">Android 开发者参考</a></li>
      <li><a href="/flutter-for-ios/">iOS 开发者参考</a></li>
      <li><a href="/flutter-for-react-native/">React Native 开发者参考</a></li>
      <li><a href="/gestures/">手势</a></li>
      <li><a href="/animations/">动画</a></li>
      <li><a href="/layout/">框约束</a></li>
      <li><a href="/assets-and-images/">资源与图像</a></li>
      <li><a href="/tutorials/internationalization">国际化</a></li>
      <li><a href="/accessibility">无障碍</a></li>
    </ul>

  <li class="sidebar-title">使用设备与 SDK 中的 API</li>

    <ul class="sidebar-items">
      <li><a href="/using-packages/">使用扩展包</a></li>
      <li><a href="/developing-packages/">开发扩展包</a></li>
      <li><a href="/platform-channels/">平台特定代码</a></li>
      <li><a href="/json/">JSON 和序列化</a></li>
      
    </ul>

  <li class="sidebar-title">开发与工具</li>

    <ul class="sidebar-items">
      <li><a href="/using-ide/">Flutter IDE 的使用</a></li>
      <li><a href="/hot-reload/">热重载的使用</a></li>
      <li><a href="/testing/">应用测试</a></li>
      <li><a href="/debugging/">应用调试</a></li>
      <li><a href="/ui-performance/">性能分析</a></li>
      <li><a href="/inspector/">用户界面检查</a></li>
      <li><a href="/android-release/">编译正式版的 Android 应用</a></li>
      <li><a href="/ios-release/">编译正式版的 iOS 应用</a></li>
      <li><a href="/fastlane-cd/">使用 Fastlane 持续部署</a></li>
      <li><a href="/upgrading/">升级 Flutter</a></li>
      <li><a href="/formatting/"> 格式化代码</a></li>
    </ul>

  <li class="sidebar-title">更多细节</li>

    <ul class="sidebar-items">
      <li><a href="/faq/">FAQ</a></li>
      <li><a href="/technical-overview">技术一览</a></li>
      <li><a href="https://docs.google.com/presentation/d/1B3p0kP6NV_XMOimRV09Ms75ymIjU5gr6GGIX74Om_DE/edit?usp=sharing">神奇的 Flutter - 幻灯片</a></li>
      <li><a href="https://docs.google.com/presentation/d/1cw7A4HbvM_Abv320rVgPVGiUP2msVs7tfGbkgdrTy0I/edit?usp=sharing">架构图</a></li>
      <li><a href="https://www.bilibili.com/video/av14430321/">Flutter 框架层设计 <i class="fa fa-video-camera" aria-hidden="true"></i></a></li>
      <li><a href="https://www.bilibili.com/video/av6269773/">Flutter 的渲染管线 <i class="fa fa-video-camera" aria-hidden="true"></i></a></li>
    </ul>

</ul>

        </div>

        
        

        <!-- Content Column -->
        <div class="col-sm-9 main-contents">
          <div class="main-contents-body">
            <article class="post-content">
  
  
  <header class="post-header">
      <div class="btn-group contribute" role="group">
         <a href="https://github.com/flutter/website/blob/master/zh_CN/flutter-for-ios.md" class="btn btn-sm">
            <i class="fa fa-pencil"></i> Edit Source
         </a>
         <a href="https://github.com/flutter/flutter/issues/new?title=Issue from website page iOS 开发者参考&body=From URL: http://localhost:4000/flutter-for-ios/&labels=dev: docs - website" class="btn btn-sm">
            <i class="fa fa-github"></i> File Issue
        </a>
     </div>
   <div>
    <h1 class="post-title">iOS 开发者参考 </h1>
   </div>

  </header>
  

  <p>本文档适用于那些希望用他们目前的 iOS 知识来使用 Flutter 构建移动应用的 iOS 开发者们。如果你熟悉 iOS 框架基础的话，那么你可以借助这个文档快速开始 Flutter 开发。</p>

<p>在使用 Flutter 构建应用时，你的 iOS 知识和技能非常有价值，因为 Flutter 依赖于众多的手机操作系统功能和配置。Flutter 是一种构建手机用户界面的新方法，但它有一个插件系统可以与 iOS（和 Android）进行非 UI 任务进行通信。如果你是 iOS 开发专家，那么你不用重新学习所有内容就可以使用 Flutter。</p>

<p>此文档可作为手册来跳转并查找与您的需求最相关的问题。</p>

<ul id="markdown-toc">
  <li><a href="#视图" id="markdown-toc-视图">视图</a>    <ul>
      <li><a href="#ios-中的-uiview-在-flutter-中对应什么" id="markdown-toc-ios-中的-uiview-在-flutter-中对应什么">iOS 中的 <code class="highlighter-rouge">UIView</code> 在 Flutter 中对应什么</a></li>
      <li><a href="#如何更新-widget-" id="markdown-toc-如何更新-widget-">如何更新 <code class="highlighter-rouge">Widget</code> ？</a></li>
      <li><a href="#如何布局-widget--storyboard-在哪" id="markdown-toc-如何布局-widget--storyboard-在哪">如何布局 widget ？ Storyboard 在哪？</a></li>
      <li><a href="#如何从布局中添加或移除组件" id="markdown-toc-如何从布局中添加或移除组件">如何从布局中添加或移除组件？</a></li>
      <li><a href="#如何给-widget-添加动画" id="markdown-toc-如何给-widget-添加动画">如何给 Widget 添加动画？</a></li>
      <li><a href="#如何在屏幕上绘制" id="markdown-toc-如何在屏幕上绘制">如何在屏幕上绘制？</a></li>
      <li><a href="#widget-的不透明度在哪" id="markdown-toc-widget-的不透明度在哪">widget 的不透明度在哪？</a></li>
      <li><a href="#如何构建自定义-widget" id="markdown-toc-如何构建自定义-widget">如何构建自定义 widget？</a></li>
    </ul>
  </li>
  <li><a href="#导航" id="markdown-toc-导航">导航</a>    <ul>
      <li><a href="#如何在页面间进行导航" id="markdown-toc-如何在页面间进行导航">如何在页面间进行导航？</a></li>
      <li><a href="#如何跳转到其他应用程序" id="markdown-toc-如何跳转到其他应用程序">如何跳转到其他应用程序？</a></li>
    </ul>
  </li>
  <li><a href="#线程--异步" id="markdown-toc-线程--异步">线程 &amp; 异步</a>    <ul>
      <li><a href="#如何编写异步代码" id="markdown-toc-如何编写异步代码">如何编写异步代码？</a></li>
      <li><a href="#如何将工作移至后台线程" id="markdown-toc-如何将工作移至后台线程">如何将工作移至后台线程？</a></li>
      <li><a href="#如何进行网络请求" id="markdown-toc-如何进行网络请求">如何进行网络请求？</a></li>
      <li><a href="#如何显示长线任务的进度" id="markdown-toc-如何显示长线任务的进度">如何显示长线任务的进度？</a></li>
    </ul>
  </li>
  <li><a href="#项目结构本地化依赖和资源" id="markdown-toc-项目结构本地化依赖和资源">项目结构，本地化，依赖和资源</a>    <ul>
      <li><a href="#如何图片资源加入到-flutter-多分辨率怎么办" id="markdown-toc-如何图片资源加入到-flutter-多分辨率怎么办">如何图片资源加入到 Flutter ？多分辨率怎么办？</a></li>
      <li><a href="#在哪存储字符串如何处理本地化" id="markdown-toc-在哪存储字符串如何处理本地化">在哪存储字符串？如何处理本地化？</a></li>
      <li><a href="#cocoapods-在-flutter-中对应什么如何添加依赖关系" id="markdown-toc-cocoapods-在-flutter-中对应什么如何添加依赖关系">Cocoapods 在 Flutter 中对应什么？如何添加依赖关系？</a></li>
    </ul>
  </li>
  <li><a href="#视图控制器" id="markdown-toc-视图控制器">视图控制器</a>    <ul>
      <li><a href="#ios-中的-viewcontroller-在-flutter-中对应什么" id="markdown-toc-ios-中的-viewcontroller-在-flutter-中对应什么">iOS 中的 <code class="highlighter-rouge">ViewController</code> 在 Flutter 中对应什么？</a></li>
      <li><a href="#如何监听-ios-的生命周期" id="markdown-toc-如何监听-ios-的生命周期">如何监听 iOS 的生命周期？</a></li>
    </ul>
  </li>
  <li><a href="#布局" id="markdown-toc-布局">布局</a>    <ul>
      <li><a href="#ios-中的-uitableview-和-uicollectionview-在-flutter-中对应什么" id="markdown-toc-ios-中的-uitableview-和-uicollectionview-在-flutter-中对应什么">iOS 中的 <code class="highlighter-rouge">UITableView</code> 和 <code class="highlighter-rouge">UICollectionView</code> 在 Flutter 中对应什么？</a></li>
      <li><a href="#如何知道列表的哪个条目被点击" id="markdown-toc-如何知道列表的哪个条目被点击">如何知道列表的哪个条目被点击？</a></li>
      <li><a href="#如何动态更新-listview-" id="markdown-toc-如何动态更新-listview-">如何动态更新 <code class="highlighter-rouge">ListView</code> ？</a></li>
      <li><a href="#ios-中的-scrollview-在-flutter-中对应什么" id="markdown-toc-ios-中的-scrollview-在-flutter-中对应什么">iOS 中的 <code class="highlighter-rouge">ScrollView</code> 在 Flutter 中对应什么？</a></li>
    </ul>
  </li>
  <li><a href="#手势检测和触摸事件处理" id="markdown-toc-手势检测和触摸事件处理">手势检测和触摸事件处理</a>    <ul>
      <li><a href="#在-flutter-中如何为-widget-添加点击监听器" id="markdown-toc-在-flutter-中如何为-widget-添加点击监听器">在 Flutter 中，如何为 widget 添加点击监听器？</a></li>
      <li><a href="#如何处理-widget-的其他手势" id="markdown-toc-如何处理-widget-的其他手势">如何处理 widget 的其他手势？</a></li>
    </ul>
  </li>
  <li><a href="#主题和文字" id="markdown-toc-主题和文字">主题和文字</a>    <ul>
      <li><a href="#如何为应用程序设置主题" id="markdown-toc-如何为应用程序设置主题">如何为应用程序设置主题？</a></li>
      <li><a href="#如何为-text-设置自定义字体" id="markdown-toc-如何为-text-设置自定义字体">如何为 <code class="highlighter-rouge">Text</code> 设置自定义字体？</a></li>
      <li><a href="#如何设计-text-" id="markdown-toc-如何设计-text-">如何设计 <code class="highlighter-rouge">Text</code> ？</a></li>
    </ul>
  </li>
  <li><a href="#表单输入" id="markdown-toc-表单输入">表单输入</a>    <ul>
      <li><a href="#表格如何在-flutter-中工作如何检索用户输入" id="markdown-toc-表格如何在-flutter-中工作如何检索用户输入">表格如何在 Flutter 中工作？如何检索用户输入？</a></li>
      <li><a href="#ios-中文本框的占位符在-flutter-中对应什么" id="markdown-toc-ios-中文本框的占位符在-flutter-中对应什么">iOS 中文本框的占位符在 Flutter 中对应什么？</a></li>
      <li><a href="#如何显示验证错误" id="markdown-toc-如何显示验证错误">如何显示验证错误？</a></li>
    </ul>
  </li>
  <li><a href="#与硬件第三方服务和平台进行交互" id="markdown-toc-与硬件第三方服务和平台进行交互">与硬件，第三方服务和平台进行交互</a>    <ul>
      <li><a href="#如何与平台以及平台原生代码交互" id="markdown-toc-如何与平台以及平台原生代码交互">如何与平台以及平台原生代码交互？</a></li>
      <li><a href="#如何使用-gps-传感器" id="markdown-toc-如何使用-gps-传感器">如何使用 GPS 传感器？</a></li>
      <li><a href="#如何使用相机服务" id="markdown-toc-如何使用相机服务">如何使用相机服务?</a></li>
      <li><a href="#如何使用-facebook-进行登录" id="markdown-toc-如何使用-facebook-进行登录">如何使用 Facebook 进行登录?</a></li>
      <li><a href="#如何使用firebase功能" id="markdown-toc-如何使用firebase功能">如何使用Firebase功能？</a></li>
      <li><a href="#如何构建自己的定制本地集成" id="markdown-toc-如何构建自己的定制本地集成">如何构建自己的定制本地集成？</a></li>
    </ul>
  </li>
  <li><a href="#数据库和本地存储" id="markdown-toc-数据库和本地存储">数据库和本地存储</a>    <ul>
      <li><a href="#flutter-中如何使用-userdefaults-" id="markdown-toc-flutter-中如何使用-userdefaults-">Flutter 中如何使用 <code class="highlighter-rouge">UserDefaults</code> ？</a></li>
      <li><a href="#ios-中的-coredata-在-flutter-中对应什么" id="markdown-toc-ios-中的-coredata-在-flutter-中对应什么">iOS 中的 CoreData 在 Flutter 中对应什么</a></li>
    </ul>
  </li>
  <li><a href="#通知" id="markdown-toc-通知">通知</a>    <ul>
      <li><a href="#如何设置推送通知" id="markdown-toc-如何设置推送通知">如何设置推送通知？</a></li>
    </ul>
  </li>
</ul>

<h1 id="视图">视图</h1>

<h2 id="ios-中的-uiview-在-flutter-中对应什么">iOS 中的 <code class="highlighter-rouge">UIView</code> 在 Flutter 中对应什么</h2>

<p>在iOS中，您在 UI 中创建的大部分内容都是使用视图对象完成的，这些视图对象是 <code class="highlighter-rouge">UIView</code> 类的实例。这些可以充当其他 <code class="highlighter-rouge">UIView</code> 类的容器，它们构成了你的布局。</p>

<p>在 Flutter 中，与 <code class="highlighter-rouge">UIView</code> 相当的就是 <code class="highlighter-rouge">Widget</code>。Widget 并不会完全映射到 iOS 视图上，但是当你完全了解 Flutter 的工作原理后，可以将他们视为“你声明和构建 UI 的方式”。</p>

<p>当然，这些与 <code class="highlighter-rouge">UIView</code> 有些差异。开始，widget 具有不同的生命周期：它们是不可变的，只有在它们需要改变时才存在。每当 widget 或它的状态改变，Flutter 框架会创建一个新的 widget 实例的树。相比之下， iOS 视图在改变时不会被重新创建，而它是一个可变实体，只能绘制一次，在使用 <code class="highlighter-rouge">setNeedsDisplay()</code> 失效之前不会重新绘制。</p>

<p>此外，与 <code class="highlighter-rouge">UIView</code> 不同， Flutter 的 widget 是轻量的,在某种程度上得益于 widget 的不可变性。因为他们自身并不是视图，也不会直接绘制任何东西，而是 UI 的描述和它的语义，它们在实际视图对象下面“膨胀”。</p>

<p>Flutter 包含了 <a href="https://material.io/develop/flutter/">Material 组件</a> 库。这些 widget 实现了 <a href="https://material.io/design/">Material Design 设计规范</a> 。Material Design 是针对所有平台（包括iOS）优化的灵活设计系统。</p>

<p>尽管 Flutter 的灵活性和表现力足以实现任何设计语言，在 iOS 中，您依然可以使用 <a href="https://flutter.io/widgets/cupertino/">Cupertino widgets</a> 来生成看起来像 <a href="https://developer.apple.com/design/resources/">Apple iOS 设计语言</a> 的界面。</p>

<h2 id="如何更新-widget-">如何更新 <code class="highlighter-rouge">Widget</code> ？</h2>

<p>要在 iOS 中更新视图，你可以直接改变它们。在 Flutter 中，widget 是不可变的，不能直接更新。相反，你必须操作 widget 的状态。</p>

<p>这就是有状态的 vs 无状态的 widget 概念出现的地方。<code class="highlighter-rouge">StatelessWidget</code> 犹如其名—一个没有附加状态的 widget。</p>

<p>当你描述的用户界面部分不依赖于 widget 的初始配置信息以外的其他任何内容时，<code class="highlighter-rouge">StatelessWidgets</code> 就非常有用。</p>

<p>举个例子，在 iOS 中，这与将你的 logo 作为 <code class="highlighter-rouge">image</code> 放入 <code class="highlighter-rouge">UIImageView</code> 中类似。如果在运行期间 logo 不改变，在 Flutter 中使用 <code class="highlighter-rouge">StatelessWidget</code>。</p>

<p>如果你想要基于 HTTP 调用后收到的数据来动态改变 UI ，那么使用 <code class="highlighter-rouge">StatefulWidget</code>。在 HTTP 调用完成后，告诉 Flutter 框架 widget 的 <code class="highlighter-rouge">State</code> 已更新，以便它可以更新 UI。</p>

<p>无状态和有状态的 widget 之间重要的区别就是 <code class="highlighter-rouge">StatefulWidget</code> 具有一个 <code class="highlighter-rouge">State</code> 对象，用于存储状态数据并且跨树重建执行，因此不会丢失。</p>

<p>如有疑问，请记住这个准则：如果 widget 在 <code class="highlighter-rouge">build</code> 方法之外改变（例如，由于运行时用户交互），那它是有状态的。如果 widget 永远不会改变，一旦构建，它就是无状态的。然而，即使一个 widget 是有状态的，如果包含的父 widget 本身没有对这些改变（或其他输入）作出反应，它仍然可以是无状态的。</p>

<p>下面的例子展示了如何使用 <code class="highlighter-rouge">StatelessWidget</code>。一个常见的 <code class="highlighter-rouge">StatelessWidget</code> 是 <code class="highlighter-rouge">Text</code> widget。如果你看看 <code class="highlighter-rouge">Text</code> widget 的实现，你就会发现它是 <code class="highlighter-rouge">StatelessWidget</code> 的子类。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>new Text(
  &#39;I like Flutter!&#39;,
  style: new TextStyle(fontWeight: FontWeight.bold),
);</code></pre>

<p>如果你看一下上面的代码，你或许会注意到 <code class="highlighter-rouge">Text</code> widget 并没有携带明确的状态。它呈现了构造函数中传递的内容，仅此而已。</p>

<p>但是，如果你想要“我喜欢 Flutter ”动态变化，例如当点击 <code class="highlighter-rouge">FloatingActionButton</code> 时会发生什么？</p>

<p>要实现这个，将 <code class="highlighter-rouge">Text</code> widget 包装在 <code class="highlighter-rouge">StatefulWidget</code> 中，并且当用户点击按钮的时候更新它。</p>

<p>例如:</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  // Default placeholder text
  String textToShow = &quot;I Like Flutter&quot;;
  void _updateText() {
    setState(() {
      // update the text
      textToShow = &quot;Flutter is Awesome!&quot;;
    });
  }
  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new Center(child: new Text(textToShow)),
      floatingActionButton: new FloatingActionButton(
        onPressed: _updateText,
        tooltip: &#39;Update Text&#39;,
        child: new Icon(Icons.update),
      ),
    );
  }
}</code></pre>

<h2 id="如何布局-widget--storyboard-在哪">如何布局 widget ？ Storyboard 在哪？</h2>

<p>在 iOS 中，你或许会使用一个 Storyboard 文件来组织你的视图并设置约束，或者你可能在视图控制器中以编程方式来设置约束。在 Flutter 中，通过编写一个 widget 树来在代码中声明你的布局。</p>

<p>接下来的例子展示了如何去显示一个带有内边距的简单 widget ：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>@override
Widget build(BuildContext context) {
  return new Scaffold(
    appBar: new AppBar(
      title: new Text(&quot;Sample App&quot;),
    ),
    body: new Center(
      child: new CupertinoButton(
        onPressed: () {
          setState(() { _pressedCount += 1; });
        },
        child: new Text(&#39;Hello&#39;),
        padding: new EdgeInsets.only(left: 10.0, right: 10.0),
      ),
    ),
  );
}</code></pre>

<p>你可以为任何 widget 添加内边距，这些模仿 iOS 中的约束功能。</p>

<p>你可以查看 Flutter 在 <a href="/widgets/layout/">widget 目录</a>中必须提供的布局。</p>

<h2 id="如何从布局中添加或移除组件">如何从布局中添加或移除组件？</h2>

<p>在 iOS 中，在父视图中调用 <code class="highlighter-rouge">addSubview()</code> ，或着在子视图中调用 <code class="highlighter-rouge">removeFromSuperview()</code> 来动态添加或移除子视图。在 Flutter 中，由于 widget 是不可变的，不能直接像 <code class="highlighter-rouge">addSubview()</code> 那样。你可以将函数传递给返回 widget 的父类，并用布尔标志来控制子类的创建。</p>

<p>接下来的例子展示了当用户点击了 <code class="highlighter-rouge">FloatingActionButton</code> 时，两个 widget 之间如何切换：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  // Default value for toggle
  bool toggle = true;
  void _toggle() {
    setState(() {
      toggle = !toggle;
    });
  }

  _getToggleChild() {
    if (toggle) {
      return new Text(&#39;Toggle One&#39;);
    } else {
      return new CupertinoButton(
        onPressed: () {},
        child: new Text(&#39;Toggle Two&#39;),
      );
    }
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new Center(
        child: _getToggleChild(),
      ),
      floatingActionButton: new FloatingActionButton(
        onPressed: _toggle,
        tooltip: &#39;Update Text&#39;,
        child: new Icon(Icons.update),
      ),
    );
  }
}</code></pre>

<h2 id="如何给-widget-添加动画">如何给 Widget 添加动画？</h2>

<p>在 iOS 中，通过在视图上调用 <code class="highlighter-rouge">animate(withDuration:animations:)</code> 方法来创建动画。在Flutter 中，使用动画库将 widget 封装进动画 widget 中。</p>

<p>在 Flutter 中，使用 <code class="highlighter-rouge">AnimationController</code> ，这是个可以暂停，寻找，停止，反转动画的 <code class="highlighter-rouge">Animation&lt;double&gt;</code> 。它需要一个<code class="highlighter-rouge">Ticker</code>，用于在 vsync 发生时发出信号，并在每帧运行时在 0 和 1 之间产生线性插值。然后，您创建一个或多个 <code class="highlighter-rouge">Animation</code> 并将它们附加到控制器。</p>

<p>例如，你可能会使用 <code class="highlighter-rouge">CurvedAnimation</code> 来实现沿插值曲线的动画。从这个意义上说，控制器是动画过程的“主要”源，而且  <code class="highlighter-rouge">CurvedAnimation</code> 计算替代控制器默认的线性运动的曲线。与 widget ，Flutter 中的动画也用于合成。</p>

<p>当构建 widget 树时，将 <code class="highlighter-rouge">Animation</code> 赋值给 widget 的动画属性，例如 <code class="highlighter-rouge">FadeTransition</code> 的不透明度，并且告诉控制器开始动画。</p>

<p>接下来的列子展示了如何编写 <code class="highlighter-rouge">FadeTransition</code> ，当你点击 <code class="highlighter-rouge">FloatingActionButton</code> 时将 widget 渐渐融入进 logo 中 ：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Fade Demo&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new MyFadeTest(title: &#39;Fade Demo&#39;),
    );
  }
}

class MyFadeTest extends StatefulWidget {
  MyFadeTest({Key key, this.title}) : super(key: key);

  final String title;

  @override
  _MyFadeTest createState() =&gt; new _MyFadeTest();
}

class _MyFadeTest extends State&lt;MyFadeTest&gt; with TickerProviderStateMixin {
  AnimationController controller;
  CurvedAnimation curve;

  @override
  void initState() {
    controller = new AnimationController(duration: const Duration(milliseconds: 2000), vsync: this);
    curve = new CurvedAnimation(parent: controller, curve: Curves.easeIn);
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(widget.title),
      ),
      body: new Center(
        child: new Container(
          child: new FadeTransition(
            opacity: curve,
            child: new FlutterLogo(
              size: 100.0,
            )
          )
        )
      ),
      floatingActionButton: new FloatingActionButton(
        tooltip: &#39;Fade&#39;,
        child: new Icon(Icons.brush),
        onPressed: () {
          controller.forward();
        },
      ),
    );
  }

  @override
  dispose() {
    controller.dispose();
    super.dispose();
  }
}</code></pre>

<p>有关更多信息，请查阅 <a href="/widgets/animation/">动画 &amp; 动画 widget</a> ， <a href="/tutorials/animation">动画教程</a> ， <a href="/animations/">动画概览</a>。</p>

<h2 id="如何在屏幕上绘制">如何在屏幕上绘制？</h2>

<p>在 iOS 中，使用 <code class="highlighter-rouge">CoreGraphics</code> 在屏幕上绘制线和形状。 Flutter 有和基于 <code class="highlighter-rouge">Canvas</code> 类的不同 API ，还有两个帮助你来进行绘制的类，<code class="highlighter-rouge">CustomPaint</code> 和 <code class="highlighter-rouge">CustomPainter</code> ，后面的类是实现绘制到画布上的算法。</p>

<p>想要了解如何在 Flutter 中实现签名器（ signature painter ），请查看 Collin 在 <a href="https://stackoverflow.com/questions/46241071/create-signature-area-for-mobile-app-in-dart-flutter">StackOverflow</a> 上的回答。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class SignaturePainter extends CustomPainter {
  SignaturePainter(this.points);

  final List&lt;Offset&gt; points;

  void paint(Canvas canvas, Size size) {
    var paint = new Paint()
      ..color = Colors.black
      ..strokeCap = StrokeCap.round
      ..strokeWidth = 5.0;
    for (int i = 0; i &lt; points.length - 1; i++) {
      if (points[i] != null &amp;&amp; points[i + 1] != null)
        canvas.drawLine(points[i], points[i + 1], paint);
    }
  }

  bool shouldRepaint(SignaturePainter other) =&gt; other.points != points;
}

class Signature extends StatefulWidget {
  SignatureState createState() =&gt; new SignatureState();
}

class SignatureState extends State&lt;Signature&gt; {

  List&lt;Offset&gt; _points = &lt;Offset&gt;[];

  Widget build(BuildContext context) {
    return new GestureDetector(
      onPanUpdate: (DragUpdateDetails details) {
        setState(() {
          RenderBox referenceBox = context.findRenderObject();
          Offset localPosition =
          referenceBox.globalToLocal(details.globalPosition);
          _points = new List.from(_points)..add(localPosition);
        });
      },
      onPanEnd: (DragEndDetails details) =&gt; _points.add(null),
      child: new CustomPaint(painter: new SignaturePainter(_points), size: Size.infinite),
    );
  }
}</code></pre>

<h2 id="widget-的不透明度在哪">widget 的不透明度在哪？</h2>

<p>在 iOS 中视图都有 .opacity 或 .alpha。在 Flutter 中，大多数情况下你需要将 widget 封装进一个 Opacity widget 中来实现这个。</p>

<h2 id="如何构建自定义-widget">如何构建自定义 widget？</h2>

<p>在 iOS 中，通常会对 <code class="highlighter-rouge">UIView</code> 进行子类化，或使用已有的视图来重写和实现期望所需行为的方法。在 Flutter 中，通过<a href="/technical-overview/#everythings-a-widget">组合</a>轻量 widget (而不是扩展它们)来构建自定义 widget。</p>

<p>例如，你如何构建一个在构造函数中使用标签的 <code class="highlighter-rouge">CustomButton</code>？创建一个使用标签组合 <code class="highlighter-rouge">RaisedButton</code> 的 CustomButton ，而不是在 <code class="highlighter-rouge">RaisedButton</code> 上进行扩展：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class CustomButton extends StatelessWidget {
  final String label;

  CustomButton(this.label);

  @override
  Widget build(BuildContext context) {
    return new RaisedButton(onPressed: () {}, child: new Text(label));
  }
}</code></pre>

<p>Then use <code class="highlighter-rouge">CustomButton</code>, just as you’d use any other Flutter widget:</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>@override
Widget build(BuildContext context) {
  return new Center(
    child: new CustomButton(&quot;Hello&quot;),
  );
}</code></pre>

<h1 id="导航">导航</h1>

<h2 id="如何在页面间进行导航">如何在页面间进行导航？</h2>

<p>在 iOS 中，为了在视图控制器之间切换，可以使用管理要显示视图控制器堆栈的 <code class="highlighter-rouge">UINavigationController</code> 。</p>

<p>Flutter 有一个类似的实现，使用 <code class="highlighter-rouge">Navigator</code> 和 <code class="highlighter-rouge">Routes</code>。<code class="highlighter-rouge">Route</code> 是应用程序“屏幕”或“页面”的抽象，<code class="highlighter-rouge">Navigator</code> 是一种管理路由的 <a href="technical-overview/#everythings-a-widget">widget</a> 。一个路由大致上映射一个 <code class="highlighter-rouge">UIViewController</code> 。navigator 与 iOS 的 <code class="highlighter-rouge">UINavigationController</code> 工作原理相似，因为它根据是否导航到视图或从视图返回进行 <code class="highlighter-rouge">push()</code> 和 <code class="highlighter-rouge">pop()</code> 路由。</p>

<p>在两个页面间导航，你有几个选项：</p>

<ul>
  <li>指定路由名称的映射。（ MaterialApp ）</li>
  <li>直接导航到路由。（ WidgetApp ）</li>
</ul>

<p>以下示例构建一个Map。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>void main() {
  runApp(new MaterialApp(
    home: new MyAppHome(), // becomes the route named &#39;/&#39;
    routes: &lt;String, WidgetBuilder&gt; {
      &#39;/a&#39;: (BuildContext context) =&gt; new MyPage(title: &#39;page A&#39;),
      &#39;/b&#39;: (BuildContext context) =&gt; new MyPage(title: &#39;page B&#39;),
      &#39;/c&#39;: (BuildContext context) =&gt; new MyPage(title: &#39;page C&#39;),
    },
  ));
}</code></pre>

<p>通过将其名称 <code class="highlighter-rouge">push</code> 到 <code class="highlighter-rouge">Navigator</code> 来导航到路由。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>Navigator.of(context).pushNamed(&#39;/b&#39;);</code></pre>

<p><code class="highlighter-rouge">Navigator</code> 类在处理 Flutter 中的路由，并用于从已经推到堆栈中的路由中获取回调结果。
这是通过 <code class="highlighter-rouge">push()</code> 返回的 <code class="highlighter-rouge">Future</code> 上的 <code class="highlighter-rouge">await</code> 完成的。</p>

<p>例如，要启动允许用户选择其位置的“位置”路由，您可以执行以下操作：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>Map coordinates = await Navigator.of(context).pushNamed(&#39;/location&#39;);</code></pre>

<p>然后，在你的’位置’路由中，一旦用户选择了他们的位置，<code class="highlighter-rouge">pop()</code> 堆栈的结果是：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>Navigator.of(context).pop({&quot;lat&quot;:43.821757,&quot;long&quot;:-79.226392});</code></pre>

<h2 id="如何跳转到其他应用程序">如何跳转到其他应用程序？</h2>

<p>在iOS中，要将用户发送给其他应用程序，请使用特定的URL方案。对于系统级应用程序，该方案取决于应用程序。要在Flutter中实现此功能，请创建本地平台集成，或使用现有<a href="#plugins">插件</a>（如 <a href="https://pub.dartlang.org/packages/url_launcher"><code class="highlighter-rouge">url_launcher</code></a> ）。</p>

<h1 id="线程--异步">线程 &amp; 异步</h1>

<h2 id="如何编写异步代码">如何编写异步代码？</h2>

<p>Dart 有一个单线程执行模型，支持 <code class="highlighter-rouge">Isolate</code> （一种在另一个线程上运行 Dart 代码的方式），一个事件循环和异步编程。除非您生成 <code class="highlighter-rouge">Isolate</code> ，否则您的 Dart 代码将在主 UI 线程中运行，并由事件循环驱动。 Flutter 的事件循环相当于 iOS 主循环—即连接到主线程的 <code class="highlighter-rouge">Looper</code>。</p>

<p>Dart 的单线程模型并不意味着您需要将所有操作都作为导致 UI 冻结的阻止操作运行。相反，使用 Dart 语言提供的异步工具（例如 <code class="highlighter-rouge">async</code>/<code class="highlighter-rouge">await</code> ）来执行异步工作。</p>

<p>例如，您可以运行网络代码，而不会导致UI通过使用 <code class="highlighter-rouge">async</code>/<code class="highlighter-rouge">await</code> 挂起，并让 Dart 执行繁重的操作：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>loadData() async {
  String dataURL = &quot;https://jsonplaceholder.typicode.com/posts&quot;;
  http.Response response = await http.get(dataURL);
  setState(() {
    widgets = json.decode(response.body);
  });
}</code></pre>

<p>一旦 <code class="highlighter-rouge">await</code> 网络调用完成，通过调用 <code class="highlighter-rouge">setState()</code> 来更新UI，这会触发重构 widget 子树并更新数据。</p>

<p>以下示例异步加载数据并将其显示在 <code class="highlighter-rouge">ListView</code> 中：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;dart:convert&#39;;

import &#39;package:flutter/material.dart&#39;;
import &#39;package:http/http.dart&#39; as http;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  List widgets = [];

  @override
  void initState() {
    super.initState();

    loadData();
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new ListView.builder(
          itemCount: widgets.length,
          itemBuilder: (BuildContext context, int position) {
            return getRow(position);
          }));
  }

  Widget getRow(int i) {
    return new Padding(
      padding: new EdgeInsets.all(10.0),
      child: new Text(&quot;Row ${widgets[i][&quot;title&quot;]}&quot;)
    );
  }

  loadData() async {
    String dataURL = &quot;https://jsonplaceholder.typicode.com/posts&quot;;
    http.Response response = await http.get(dataURL);
    setState(() {
      widgets = json.decode(response.body);
    });
  }
}</code></pre>

<p>有关在后台执行工作的更多信息，请参阅下一节，以及 Flutter 与 iOS 的不同之处。</p>

<h2 id="如何将工作移至后台线程">如何将工作移至后台线程？</h2>

<p>由于 Flutter 是单线程的并且运行事件循环（如 Node.js ），因此您不必担心线程管理或产生后台线程。如果您正在执行 I/O 绑定工作（如磁盘访问或网络调用），那么您可以安全地使用 <code class="highlighter-rouge">async</code>/<code class="highlighter-rouge">await</code> 并完成。另一方面，如果您需要进行计算密集型工作以保持 CPU 繁忙，则您需要将其移至 <code class="highlighter-rouge">Isolate</code> 以避免阻塞事件循环。</p>

<p>对于 I/O 绑定的工作，将函数声明为 <code class="highlighter-rouge">async</code> 函数，并在函数内的长时间运行的任务中声明 <code class="highlighter-rouge">await</code>：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>loadData() async {
  String dataURL = &quot;https://jsonplaceholder.typicode.com/posts&quot;;
  http.Response response = await http.get(dataURL);
  setState(() {
    widgets = json.decode(response.body);
  });
}</code></pre>

<p>这就是通常进行网络或数据库调用的方式，它们都是 I/O 操作</p>

<p>但是，有时您可能正在处理大量数据，并且 UI 挂起。在 Flutter 中，使用 <code class="highlighter-rouge">Isolate</code> 来利用多个 CPU 内核来执行长时间运行或计算密集型任务。</p>

<p>隔离是不共享任何内存的独立执行线程与主执行内存堆。这意味着你不能从主线程访问变量，或者通过调用 <code class="highlighter-rouge">setState()</code> 来更新你的 UI 。隔离对他们的名字是真实的，并且不能共享内存（例如以静态字段的形式）。</p>

<p>以下示例以简单的隔离方式显示如何将数据共享回主线程以更新 UI 。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>loadData() async {
  ReceivePort receivePort = new ReceivePort();
  await Isolate.spawn(dataLoader, receivePort.sendPort);

  // The &#39;echo&#39; isolate sends its SendPort as the first message
  SendPort sendPort = await receivePort.first;

  List msg = await sendReceive(sendPort, &quot;https://jsonplaceholder.typicode.com/posts&quot;);

  setState(() {
    widgets = msg;
  });
}

// The entry point for the isolate
static dataLoader(SendPort sendPort) async {
  // Open the ReceivePort for incoming messages.
  ReceivePort port = new ReceivePort();

  // Notify any other isolates what port this isolate listens to.
  sendPort.send(port.sendPort);

  await for (var msg in port) {
    String data = msg[0];
    SendPort replyTo = msg[1];

    String dataURL = data;
    http.Response response = await http.get(dataURL);
    // Lots of JSON to parse
    replyTo.send(json.decode(response.body));
  }
}

Future sendReceive(SendPort port, msg) {
  ReceivePort response = new ReceivePort();
  port.send([msg, response.sendPort]);
  return response.first;
}</code></pre>

<p>在这里，  <code class="highlighter-rouge">dataLoader()</code> 是在独立执行线程中运行的 <code class="highlighter-rouge">Isolate</code> 。在隔离区中，您可以执行更多 CPU 密集型处理（例如解析大型 JSON ），或者执行计算密集型数学运算或信号处理。</p>

<p>您可以运行下面的完整示例:</p>

<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;dart:convert&#39;;

import &#39;package:flutter/material.dart&#39;;
import &#39;package:http/http.dart&#39; as http;
import &#39;dart:async&#39;;
import &#39;dart:isolate&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  List widgets = [];

  @override
  void initState() {
    super.initState();
    loadData();
  }

  showLoadingDialog() {
    if (widgets.length == 0) {
      return true;
    }

    return false;
  }

  getBody() {
    if (showLoadingDialog()) {
      return getProgressDialog();
    } else {
      return getListView();
    }
  }

  getProgressDialog() {
    return new Center(child: new CircularProgressIndicator());
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
        appBar: new AppBar(
          title: new Text(&quot;Sample App&quot;),
        ),
        body: getBody());
  }

  ListView getListView() =&gt; new ListView.builder(
      itemCount: widgets.length,
      itemBuilder: (BuildContext context, int position) {
        return getRow(position);
      });

  Widget getRow(int i) {
    return new Padding(padding: new EdgeInsets.all(10.0), child: new Text(&quot;Row ${widgets[i][&quot;title&quot;]}&quot;));
  }

  loadData() async {
    ReceivePort receivePort = new ReceivePort();
    await Isolate.spawn(dataLoader, receivePort.sendPort);

    // The &#39;echo&#39; isolate sends its SendPort as the first message
    SendPort sendPort = await receivePort.first;

    List msg = await sendReceive(sendPort, &quot;https://jsonplaceholder.typicode.com/posts&quot;);

    setState(() {
      widgets = msg;
    });
  }

// the entry point for the isolate
  static dataLoader(SendPort sendPort) async {
    // Open the ReceivePort for incoming messages.
    ReceivePort port = new ReceivePort();

    // Notify any other isolates what port this isolate listens to.
    sendPort.send(port.sendPort);

    await for (var msg in port) {
      String data = msg[0];
      SendPort replyTo = msg[1];

      String dataURL = data;
      http.Response response = await http.get(dataURL);
      // Lots of JSON to parse
      replyTo.send(json.decode(response.body));
    }
  }

  Future sendReceive(SendPort port, msg) {
    ReceivePort response = new ReceivePort();
    port.send([msg, response.sendPort]);
    return response.first;
  }
}</code></pre>

<h2 id="如何进行网络请求">如何进行网络请求？</h2>

<p>在使用流行的 <a href="https://pub.dartlang.org/packages/http"><code class="highlighter-rouge">http</code> 包</a>时，使用 Flutter 进行网络访问非常简单。这将您通常自己实现的大量网络抽象出来，使网络访问变得简单。</p>

<p>要使用 <code class="highlighter-rouge">http</code> 包，将它添加到 <code class="highlighter-rouge">pubspec.yaml</code> 中的依赖关系中：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-yaml language-yaml"><code>dependencies:
  ...
  http: ^0.11.3+16</code></pre>

<p>要进行网络调用，请在 <code class="highlighter-rouge">async</code> 函数 <code class="highlighter-rouge">http.get()</code> 上调用 <code class="highlighter-rouge">await</code> ：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;dart:convert&#39;;

import &#39;package:flutter/material.dart&#39;;
import &#39;package:http/http.dart&#39; as http;
[...]
  loadData() async {
    String dataURL = &quot;https://jsonplaceholder.typicode.com/posts&quot;;
    http.Response response = await http.get(dataURL);
    setState(() {
      widgets = json.decode(response.body);
    });
  }
}</code></pre>

<h2 id="如何显示长线任务的进度">如何显示长线任务的进度？</h2>

<p>在 iOS 中，通常使用 <code class="highlighter-rouge">UIProgressView</code> 来显示后台正在执行的长线任务。</p>

<p>在 Flutter 中，使用 <code class="highlighter-rouge">ProgressIndicator</code>。通过控制何时通过布尔标志显示，以编程方式显示进度。告诉 Flutter 在长线任务开始前更新其状态，并在结束后隐藏它。</p>

<p>在下面的示例中，build 函数被分为三个不同的函数。如果 <code class="highlighter-rouge">showLoadingDialog()</code> 为 <code class="highlighter-rouge">true</code>（当 <code class="highlighter-rouge">widgets.length == 0</code> ），则渲染 <code class="highlighter-rouge">ProgressIndicator</code> 。否则，使用网络调用返回的数据呈现 <code class="highlighter-rouge">ListView</code> 。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;dart:convert&#39;;

import &#39;package:flutter/material.dart&#39;;
import &#39;package:http/http.dart&#39; as http;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  List widgets = [];

  @override
  void initState() {
    super.initState();
    loadData();
  }

  showLoadingDialog() {
    return widgets.length == 0;
  }

  getBody() {
    if (showLoadingDialog()) {
      return getProgressDialog();
    } else {
      return getListView();
    }
  }

  getProgressDialog() {
    return new Center(child: new CircularProgressIndicator());
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
        appBar: new AppBar(
          title: new Text(&quot;Sample App&quot;),
        ),
        body: getBody());
  }

  ListView getListView() =&gt; new ListView.builder(
      itemCount: widgets.length,
      itemBuilder: (BuildContext context, int position) {
        return getRow(position);
      });

  Widget getRow(int i) {
    return new Padding(padding: new EdgeInsets.all(10.0), child: new Text(&quot;Row ${widgets[i][&quot;title&quot;]}&quot;));
  }

  loadData() async {
    String dataURL = &quot;https://jsonplaceholder.typicode.com/posts&quot;;
    http.Response response = await http.get(dataURL);
    setState(() {
      widgets = json.decode(response.body);
    });
  }
}</code></pre>

<h1 id="项目结构本地化依赖和资源">项目结构，本地化，依赖和资源</h1>

<h2 id="如何图片资源加入到-flutter-多分辨率怎么办">如何图片资源加入到 Flutter ？多分辨率怎么办？</h2>

<p>尽管 iOS 将图像和资源视为不同的项目，但 Flutter 应用程序只有资源。在iOS上放置在 <code class="highlighter-rouge">Images.xcasset</code> 文件夹中的资源将放置在 Flutter 的资源文件夹中。与 iOS 一样，资源是任何类型的文件，而不仅仅是图片。例如，您可能在 <code class="highlighter-rouge">my-assets</code> 文件夹中有一个 JSON 文件:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>my-assets/data.json
</code></pre>
</div>

<p>在 <code class="highlighter-rouge">pubspec.yaml</code> 文件中声明资源：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-yaml language-yaml"><code>assets:
 - my-assets/data.json</code></pre>

<p>然后使用 <a href="https://docs.flutter.io/flutter/services/AssetBundle-class.html"><code class="highlighter-rouge">AssetBundle</code></a> 从代码访问它：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;dart:async&#39; show Future;
import &#39;package:flutter/services.dart&#39; show rootBundle;

Future&lt;String&gt; loadAsset() async {
  return await rootBundle.loadString(&#39;my-assets/data.json&#39;);
}</code></pre>

<p>对于图片，Flutter 遵循一种简单的基于密度的格式，如 iOS 图片资源可能是 <code class="highlighter-rouge">1.0x</code>， <code class="highlighter-rouge">2.0x</code>， <code class="highlighter-rouge">3.0x</code> 或任何其他倍数。所谓的 <a href="https://docs.flutter.io/flutter/dart-ui/Window/devicePixelRatio.html"><code class="highlighter-rouge">devicePixelRatio</code></a> 表示单个逻辑像素中物理像素的比例。</p>

<p>资源位于任意文件夹中— Flutter 没有预定义的文件夹结构。在 <code class="highlighter-rouge">pubspec.yaml</code> 文件中声明资源（包含位置），Flutter 将其识别。</p>

<p>例如，要将名为 <code class="highlighter-rouge">my_icon.png</code> 的图片添加到您的 Flutter 项目中，您可能决定将其存储在任意称为 <code class="highlighter-rouge">images</code> 的文件夹中。将基础图像（1.0x）放置在 <code class="highlighter-rouge">images</code> 文件夹中，并将其他变体放在以相应比率乘数命名的子文件夹中：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>images/my_icon.png       // Base: 1.0x image
images/2.0x/my_icon.png  // 2.0x image
images/3.0x/my_icon.png  // 3.0x image
</code></pre>
</div>

<p>接下来，在 <code class="highlighter-rouge">pubspec.yaml</code> 文件中声明这些图像：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-yaml language-yaml"><code>assets:
 - images/my_icon.jpeg</code></pre>

<p>您现在可以使用 <code class="highlighter-rouge">AssetImage</code> 访问您的图片：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>return new AssetImage(&quot;images/a_dot_burr.jpeg&quot;);</code></pre>

<p>或者直接在 <code class="highlighter-rouge">Image</code> widget 中：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>@override
Widget build(BuildContext context) {
  return new Image.asset(&quot;images/my_image.png&quot;);
}</code></pre>

<p>更多详情，请查看<a href="/assets-and-images">在 Flutter 中添加资源和图片</a>。</p>

<h2 id="在哪存储字符串如何处理本地化">在哪存储字符串？如何处理本地化？</h2>

<p>不像 iOS 有 <code class="highlighter-rouge">Localizable.strings</code> 文件，Flutter 目前没有处理字符串的专用系统。
目前，最佳做法是将您的副本文本作为静态字段声明并从那里访问它们。例如：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class Strings {
  static String welcomeMessage = &quot;Welcome To Flutter&quot;;
}</code></pre>

<p>你可以像这样访问你的字符串</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>new Text(Strings.welcomeMessage)</code></pre>

<p>默认情况下，Flutter 仅支持美式英语字符串。如果您需要添加对其他语言的支持，请包含 <code class="highlighter-rouge">flutter_localizations</code> 包。您可能还需要添加 Dart 的 <a href="https://pub.dartlang.org/packages/intl"><code class="highlighter-rouge">intl</code></a> 包以使用 i10n 机器，例如日期/时间格式。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-yaml language-yaml"><code>dependencies:
  # ...
  flutter_localizations:
    sdk: flutter
  intl: &quot;^0.15.6&quot;</code></pre>

<p>要使用 <code class="highlighter-rouge">flutter_localizations</code> 包，请在应用部件上指定 <code class="highlighter-rouge">localizationsDelegates</code> 和 <code class="highlighter-rouge">supportedLocales</code> ：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter_localizations/flutter_localizations.dart&#39;;

new MaterialApp(
 localizationsDelegates: [
   // Add app-specific localization delegate[s] here
   GlobalMaterialLocalizations.delegate,
   GlobalWidgetsLocalizations.delegate,
 ],
 supportedLocales: [
    const Locale(&#39;en&#39;, &#39;US&#39;), // English
    const Locale(&#39;he&#39;, &#39;IL&#39;), // Hebrew
    // ... other locales the app supports
  ],
  // ...
)</code></pre>

<p>代理包含实际的本地化值，而 <code class="highlighter-rouge">supportedLocales</code> 定义应用程序支持的区域设置。上面的例子使用了一个 <code class="highlighter-rouge">MaterialApp</code> ，因此它既有用于基本 widget 本地化值的 <code class="highlighter-rouge">GlobalWidgetsLocalizations</code> ，也有用于 Material widget 本地化的 <code class="highlighter-rouge">MaterialWidgetsLocalizations</code> 。如果您为您的应用使用 <code class="highlighter-rouge">WidgetsApp</code> ，则不需要后者。请注意，这两个代理包含“默认”值，但您需要为您自己的应用的本地化副本提供一个或多个代理 ，如果您希望这些副本本地化。</p>

<p>初始化时，<code class="highlighter-rouge">WidgetsApp</code> （或 <code class="highlighter-rouge">MaterialApp</code> ）会为您创建一个 <a href="https://docs.flutter.io/flutter/widgets/Localizations-class.html"><code class="highlighter-rouge">Localizations</code></a> widget，并使用你指定的代理。设备的当前语言环境始终可以从当前上下文的 <code class="highlighter-rouge">Localizations</code> widget（以 <code class="highlighter-rouge">Locale</code> 对象的形式）或使用 <a href="https://docs.flutter.io/flutter/dart-ui/Window/locale.html"><code class="highlighter-rouge">Window.locale</code></a> 访问。</p>

<p>要访问本地化资源，请使用 <code class="highlighter-rouge">Localizations.of()</code> 方法访问由给定代理提供的特定本地化类。使用 <a href="https://pub.dartlang.org/packages/intl_translation"><code class="highlighter-rouge">intl_translation</code></a> 包将可翻译的副本提取到 <a href="https://code.google.com/p/arb/wiki/ApplicationResourceBundleSpecification">arb</a> 文件进行翻译，然后将它们导入到应用程序中以便与 <code class="highlighter-rouge">intl</code> 一起使用它们。</p>

<p>有关Flutter国际化和本地化的更多详细信息，请参阅<a href="/tutorials/internationalization">国际化指南</a>，其中包含带和不带 <code class="highlighter-rouge">intl</code> 包的示例代码。</p>

<p>请注意，在 Flutter 1.0 beta 2 之前，Flutter 中定义的资源无法从本地访问，反之亦然，Flutter 无法使用本地 assets 和资源，因为它们位于单独的文件夹中。</p>

<h2 id="cocoapods-在-flutter-中对应什么如何添加依赖关系">Cocoapods 在 Flutter 中对应什么？如何添加依赖关系？</h2>

<p>在 iOS 中，您可以通过添加到 <code class="highlighter-rouge">Podfile</code> 来添加依赖项。 Flutter 使用 Dart 的构建系统和 Pub 包管理器来处理依赖关系。这些工具将原生 Android 和 iOS 包装应用程序的构建委托给相应的构建系统。</p>

<p>虽然在 Flutter 项目的 iOS 文件夹中有一个 Podfile ，但只有在您添加每个平台集成所需的本地依赖项时才使用它。通常，使用 <code class="highlighter-rouge">pubspec.yaml</code> 在 Flutter 中声明外部依赖关系。<a href="https://pub.dartlang.org/flutter/packages/">Pub</a> 是一个很好的地方来找找 Flutter 依赖包 。</p>

<h1 id="视图控制器">视图控制器</h1>

<h2 id="ios-中的-viewcontroller-在-flutter-中对应什么">iOS 中的 <code class="highlighter-rouge">ViewController</code> 在 Flutter 中对应什么？</h2>

<p>在 iOS 中，<code class="highlighter-rouge">ViewController</code> 代表用户界面的一部分，最常用于屏幕或部分。它们组合在一起构建复杂的用户界面，并帮助扩展应用程序的用户界面。在 Flutter 中，这项工作属于 Widget 。正如导航部分所述，Flutter 中的屏幕由 Widget 表示，因为“一切都是  widget ！”使用 <code class="highlighter-rouge">Navigator</code> 在代表不同屏幕或页面的不同 Route` 跳转，或者可能会在相同数据的不同状态或效果图之间跳转。</p>

<h2 id="如何监听-ios-的生命周期">如何监听 iOS 的生命周期？</h2>

<p>在iOS中，您可以重写 <code class="highlighter-rouge">ViewController</code> 的方法以捕获视图本身的生命周期方法，或者在 <code class="highlighter-rouge">AppDelegate</code> 中注册生命周期回调。在 Flutter 中，没有这样的概念，但是可以通过挂接到 <code class="highlighter-rouge">WidgetsBinding</code> 观察者并监听 <code class="highlighter-rouge">didChangeAppLifecycleState()</code> 更改事件来监听生命周期事件。</p>

<p>可观察的生命周期事件是：</p>

<ul>
  <li><code class="highlighter-rouge">inactive</code> — 应用程序处于非活动状态，并且未接收用户输入。此事件仅适用于 iOS ，因为 Android 上没有相应的事件。</li>
  <li><code class="highlighter-rouge">paused</code> — 该应用程序目前对用户不可见，不响应用户输入，但正在后台运行。</li>
  <li><code class="highlighter-rouge">resumed</code> — 该应用程序可见并响应用户输入。</li>
  <li><code class="highlighter-rouge">suspending</code> — 该应用暂时中止。 iOS平台没有相应的事件。</li>
</ul>

<p>有关这些状态含义的更多详细信息，请参阅 <a href="https://docs.flutter.io/flutter/dart-ui
/AppLifecycleState-class.html"><code class="highlighter-rouge">AppLifecycleStatus</code> 文档</a>。</p>

<h1 id="布局">布局</h1>

<h2 id="ios-中的-uitableview-和-uicollectionview-在-flutter-中对应什么">iOS 中的 <code class="highlighter-rouge">UITableView</code> 和 <code class="highlighter-rouge">UICollectionView</code> 在 Flutter 中对应什么？</h2>

<p>在iOS中，您可能会在 <code class="highlighter-rouge">UITableView</code> 或 <code class="highlighter-rouge">UICollectionView</code> 中显示一个列表。在 Flutter 中，使用 <code class="highlighter-rouge">ListView</code> 实现类似的显示。在 iOS 中，这些视图具有代理方法来决定行数，每个单元格的索引以及单元格的大小。</p>

<p>由于 Flutter 的不可变 widget 模式，将 widget 列表传递给您的 <code class="highlighter-rouge">ListView</code> ，并且 Flutter 负责确保滚动快速而平稳。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new ListView(children: _getListData()),
    );
  }

  _getListData() {
    List&lt;Widget&gt; widgets = [];
    for (int i = 0; i &lt; 100; i++) {
      widgets.add(new Padding(padding: new EdgeInsets.all(10.0), child: new Text(&quot;Row $i&quot;)));
    }
    return widgets;
  }
}</code></pre>

<h2 id="如何知道列表的哪个条目被点击">如何知道列表的哪个条目被点击？</h2>

<p>在 iOS 中，实现代理方法  <code class="highlighter-rouge">tableView:didSelectRowAtIndexPath:</code> 。在 Flutter 中，使用由传入的 widget 提供的触摸处理。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new ListView(children: _getListData()),
    );
  }

  _getListData() {
    List&lt;Widget&gt; widgets = [];
    for (int i = 0; i &lt; 100; i++) {
      widgets.add(new GestureDetector(
        child: new Padding(
          padding: new EdgeInsets.all(10.0),
          child: new Text(&quot;Row $i&quot;),
        ),
        onTap: () {
          print(&#39;row tapped&#39;);
        },
      ));
    }
    return widgets;
  }
}</code></pre>

<h2 id="如何动态更新-listview-">如何动态更新 <code class="highlighter-rouge">ListView</code> ？</h2>

<p>在 iOS 中，使用 <code class="highlighter-rouge">reloadData</code> 方法通知表或集合视图来更新列表视图的数据。</p>

<p>在Flutter中，如果您要更新 <code class="highlighter-rouge">setState()</code> 内部的 widget 列表，您很快就会发现数据不会在视觉上发生变化。这是因为当调用 <code class="highlighter-rouge">setState()</code> 时，Flutter 渲染引擎会查看 widget 树以查看是否有更改。当它到达你的 <code class="highlighter-rouge">ListView</code> 时，它执行 <code class="highlighter-rouge">==</code> 检查，并确定两个 <code class="highlighter-rouge">ListView</code> 是相同的。没有任何改变，所以不需要更新。</p>

<p>为了更新 <code class="highlighter-rouge">ListView</code> 的一个简单方法，在 <code class="highlighter-rouge">setState()</code> 中创建一个新 <code class="highlighter-rouge">List</code> ，并将旧列表中的数据复制到新列表中。虽然这种方法很简单，但不推荐用于大数据集，如下一个示例所示。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  List widgets = [];

  @override
  void initState() {
    super.initState();
    for (int i = 0; i &lt; 100; i++) {
      widgets.add(getRow(i));
    }
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new ListView(children: widgets),
    );
  }

  Widget getRow(int i) {
    return new GestureDetector(
      child: new Padding(
        padding: new EdgeInsets.all(10.0),
        child: new Text(&quot;Row $i&quot;),
      ),
      onTap: () {
        setState(() {
          widgets = new List.from(widgets);
          widgets.add(getRow(widgets.length + 1));
          print(&#39;row $i&#39;);
        });
      },
    );
  }
}</code></pre>

<p>使用 <code class="highlighter-rouge">ListView.Builder</code> 建立一个列表，这个方式是非常推荐的，高效的和有效的。当拥有动态列表或包含大量数据的列表时，此方法非常有用。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>import &#39;package:flutter/material.dart&#39;;

void main() {
  runApp(new SampleApp());
}

class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  List widgets = [];

  @override
  void initState() {
    super.initState();
    for (int i = 0; i &lt; 100; i++) {
      widgets.add(getRow(i));
    }
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new ListView.builder(
        itemCount: widgets.length,
        itemBuilder: (BuildContext context, int position) {
          return getRow(position);
        },
      ),
    );
  }

  Widget getRow(int i) {
    return new GestureDetector(
      child: new Padding(
        padding: new EdgeInsets.all(10.0),
        child: new Text(&quot;Row $i&quot;),
      ),
      onTap: () {
        setState(() {
          widgets.add(getRow(widgets.length + 1));
          print(&#39;row $i&#39;);
        });
      },
    );
  }
}</code></pre>

<p>创建一个 <code class="highlighter-rouge">ListView.builder</code> 接受两个关键参数：列表的初始长度和一个 <code class="highlighter-rouge">ItemBuilder</code> 函数,而不是创建一个 “ListView” 。</p>

<p><code class="highlighter-rouge">ItemBuilder</code> 函数与 iOS 表格或集合视图中的 <code class="highlighter-rouge">cellForItemAt</code> 委托方法类似，因为它需要一个位置，并返回要在该位置呈现的单元格。</p>

<p>最后，但最重要的是，注意 <code class="highlighter-rouge">onTap()</code> 函数不再重新创建列表，而是 <code class="highlighter-rouge">.add</code> 。</p>

<h2 id="ios-中的-scrollview-在-flutter-中对应什么">iOS 中的 <code class="highlighter-rouge">ScrollView</code> 在 Flutter 中对应什么？</h2>

<p>在 iOS 中，您可以将视图封装在 <code class="highlighter-rouge">ScrollView</code> 中，以便用户根据需要滚动内容。</p>

<p>在 Flutter 中，最简单的方法是使用 <code class="highlighter-rouge">ListView</code> 控件。这既可以作为 <code class="highlighter-rouge">ScrollView</code> 也可以作为 iOS 的 <code class="highlighter-rouge">TableView</code>，因为您可以以垂直格式布局 widget 。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>@override
Widget build(BuildContext context) {
  return new ListView(
    children: &lt;Widget&gt;[
      new Text(&#39;Row One&#39;),
      new Text(&#39;Row Two&#39;),
      new Text(&#39;Row Three&#39;),
      new Text(&#39;Row Four&#39;),
    ],
  );
}</code></pre>

<p>更多有关如何在 Flutter 中布置 widget 的详细文档，请参阅 <a href="/widgets/layout/">布局教程</a>。</p>

<h1 id="手势检测和触摸事件处理">手势检测和触摸事件处理</h1>

<h2 id="在-flutter-中如何为-widget-添加点击监听器">在 Flutter 中，如何为 widget 添加点击监听器？</h2>

<p>在 iOS 中，将 <code class="highlighter-rouge">GestureRecognizer</code> 附加到视图以处理点击事件。在 Flutter 中，添加触摸监听器有两种方式：</p>

<ol>
<li>
    <p>如果 widget 支持事件检测，则将函数传递给它，并在函数中处理事件。例如，
 <code class="highlighter-rouge">RaisedButton</code> widget 有一个 <code class="highlighter-rouge">onPressed</code> 参数:</p>

    <p><!-- skip --></p>
    <pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>@override
Widget build(BuildContext context) {
  return new RaisedButton(
    onPressed: () {
      print(&quot;click&quot;);
    },
    child: new Text(&quot;Button&quot;),
  );
}</code></pre>
  </li>

<li>
    <p>如果 Widget 不支持事件检测，则将该 Widget 封装在 GestureDetector 中，并将函数传递给 <code class="highlighter-rouge">onTap</code> 参数。</p>

    <p><!-- skip --></p>
    <pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class SampleApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      body: new Center(
        child: new GestureDetector(
          child: new FlutterLogo(
            size: 200.0,
          ),
          onTap: () {
            print(&quot;tap&quot;);
          },
        ),
      ),
    );
  }
}</code></pre>
  </li>
</ol>

<h2 id="如何处理-widget-的其他手势">如何处理 widget 的其他手势？</h2>

<p>使用 <code class="highlighter-rouge">GestureDetector</code> 可以收听各种手势，例如：</p>

<ul>
  <li>
    <p>点击</p>

    <ul>
      <li><code class="highlighter-rouge">onTapDown</code> — 已经在特定屏幕位置按下。</li>
      <li><code class="highlighter-rouge">onTapUp</code> — 在屏幕特定位置触发点击的点停止接触屏幕。</li>
      <li><code class="highlighter-rouge">onTap</code> — 点击已发生。</li>
      <li><code class="highlighter-rouge">onTapCancel</code> — 先前触发 <code class="highlighter-rouge">onTapDown</code> 的点击不会导致点击。</li>
    </ul>
  </li>
  <li>
    <p>双击</p>

    <ul>
      <li><code class="highlighter-rouge">onDoubleTap</code> — 用户快速连续两次在同一位置点击屏幕。</li>
    </ul>
  </li>
  <li>
    <p>长按</p>

    <ul>
      <li><code class="highlighter-rouge">onLongPress</code> — 在屏幕相同位置长时间保持点击状态。</li>
    </ul>
  </li>
  <li>
    <p>垂直拖动</p>

    <ul>
      <li><code class="highlighter-rouge">onVerticalDragStart</code> — 与屏幕接触的点在垂直方向上进一步移动。</li>
      <li><code class="highlighter-rouge">onVerticalDragUpdate</code> — 与屏幕接触的点在垂直方向上进一步移动。</li>
      <li><code class="highlighter-rouge">onVerticalDragEnd</code> — 先前与屏幕接触并垂直移动的点不再与屏幕接触，并且在停止接触屏幕时以特定速度移动。</li>
    </ul>
  </li>
  <li>
    <p>水平拖动</p>

    <ul>
      <li><code class="highlighter-rouge">onHorizontalDragStart</code> — 触摸点已经与屏幕接触并可能开始水平移动。</li>
      <li><code class="highlighter-rouge">onHorizontalDragUpdate</code> — 与屏幕接触的点已经沿水平方向进一步移动。</li>
      <li><code class="highlighter-rouge">onHorizontalDragEnd</code> — 先前与屏幕接触并水平移动的点不再与屏幕接触。</li>
    </ul>
  </li>
</ul>

<p>以下示例显示了一个 <code class="highlighter-rouge">GestureDetector</code> ，双击上旋转 Flutter logo :</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>AnimationController controller;
CurvedAnimation curve;

@override
void initState() {
  controller = new AnimationController(duration: const Duration(milliseconds: 2000), vsync: this);
  curve = new CurvedAnimation(parent: controller, curve: Curves.easeIn);
}

class SampleApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      body: new Center(
        child: new GestureDetector(
          child: new RotationTransition(
            turns: curve,
            child: new FlutterLogo(
              size: 200.0,
            )),
          onDoubleTap: () {
            if (controller.isCompleted) {
              controller.reverse();
            } else {
              controller.forward();
            }
          },
        ),
      ),
    );
  }
}</code></pre>

<h1 id="主题和文字">主题和文字</h1>

<h2 id="如何为应用程序设置主题">如何为应用程序设置主题？</h2>

<p>开箱即用，Flutter 带有一个美丽的 Material Design 实现，它可以处理您通常需要处理的大量样式和主题需求。</p>

<p>要充分利用应用程序中的 Material 组件，请声明一个顶级 widget — MaterialApp 作为应用程序的入口点。 MaterialApp 是一个方便的 widget ，它包装了许多实现 Material Design 的应用程序通常需要的 widget 。它通过添加 Material 特定功能构建在 WidgetsApp 上。</p>

<p>但是，Flutter 具有足够的灵活性和表现力，可以实现任何设计语言。在 iOS 上，您可以使用 <a href="https://docs.flutter.io/flutter/cupertino/cupertino-library.html">Cupertino 库</a>生成符合<a href="https://developer.apple.com/ios/human-interface-guidelines/overview/themes/">人机界面指南</a>的界面。有关这些 widget 的完整集合，请参阅 <a href="/widgets/cupertino/">Cupertino 小部件库</a>。</p>

<p>您还可以使用 <code class="highlighter-rouge">WidgetApp</code> 作为您的应用 widget，它提供了一些相同的功能，但不像 <code class="highlighter-rouge">MaterialApp</code> 那么丰富。</p>

<p>要自定义任何子组件的颜色和样式，请将 <code class="highlighter-rouge">ThemeData</code> 对象传递给 <code class="highlighter-rouge">MaterialApp</code> widget。例如，在下面的代码中，主色板设置为蓝色，文本选择颜色为红色。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class SampleApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
        textSelectionColor: Colors.red
      ),
      home: new SampleAppPage(),
    );
  }
}</code></pre>

<h2 id="如何为-text-设置自定义字体">如何为 <code class="highlighter-rouge">Text</code> 设置自定义字体？</h2>

<p>在 iOS 中，您可以将任何 ttf 字体文件导入到项目中，并在 <code class="highlighter-rouge">info.plist</code> 文件中创建一个引用。在 Flutter 中，将字体文件放在一个文件夹中，并将其引用到 <code class="highlighter-rouge">pubspec.yaml</code> 文件中，这与导入图片的方式类似。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-yaml language-yaml"><code>fonts:
   - family: MyCustomFont
     fonts:
       - asset: fonts/MyCustomFont.ttf
       - style: italic</code></pre>

<p>然后将字体赋值给你的 <code class="highlighter-rouge">Text</code> ：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>@override
Widget build(BuildContext context) {
  return new Scaffold(
    appBar: new AppBar(
      title: new Text(&quot;Sample App&quot;),
    ),
    body: new Center(
      child: new Text(
        &#39;This is a custom font text&#39;,
        style: new TextStyle(fontFamily: &#39;MyCustomFont&#39;),
      ),
    ),
  );
}</code></pre>

<h2 id="如何设计-text-">如何设计 <code class="highlighter-rouge">Text</code> ？</h2>

<p>与字体一起，您可以在 <code class="highlighter-rouge">Text</code> 上自定义其他样式元素。 <code class="highlighter-rouge">Text</code> 的样式参数需要一个 <code class="highlighter-rouge">TextStyle</code> 对象，您可以在其中自定义许多参数，例如：</p>

<ul>
  <li><code class="highlighter-rouge">color</code></li>
  <li><code class="highlighter-rouge">decoration</code></li>
  <li><code class="highlighter-rouge">decorationColor</code></li>
  <li><code class="highlighter-rouge">decorationStyle</code></li>
  <li><code class="highlighter-rouge">fontFamily</code></li>
  <li><code class="highlighter-rouge">fontSize</code></li>
  <li><code class="highlighter-rouge">fontStyle</code></li>
  <li><code class="highlighter-rouge">fontWeight</code></li>
  <li><code class="highlighter-rouge">hashCode</code></li>
  <li><code class="highlighter-rouge">height</code></li>
  <li><code class="highlighter-rouge">inherit</code></li>
  <li><code class="highlighter-rouge">letterSpacing</code></li>
  <li><code class="highlighter-rouge">textBaseline</code></li>
  <li><code class="highlighter-rouge">wordSpacing</code></li>
</ul>

<h1 id="表单输入">表单输入</h1>

<h2 id="表格如何在-flutter-中工作如何检索用户输入">表格如何在 Flutter 中工作？如何检索用户输入？</h2>

<p>鉴于 Flutter 如何在不同的状态下使用不可变的 widget ，您可能想知道用户输入如何适应图片。在 iOS 上，当您需要提交用户输入或对其进行操作时，您通常会查询窗口widget 的当前值。这在 Flutter 中如何工作？</p>

<p>在实践中，表格是通过专门的 widget 处理的，如 Flutter 中的所有内容。如果您有 <code class="highlighter-rouge">TextField</code> 或 <code class="highlighter-rouge">TextFormField</code> ，则可以提供 <a href="https://docs.flutter.io/flutter/widgets/TextEditingController-class.html"><code class="highlighter-rouge">TextEditingController</code></a> 来检索用户输入：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class _MyFormState extends State&lt;MyForm&gt; {
  // Create a text controller and use it to retrieve the current value.
  // of the TextField!
  final myController = new TextEditingController();

  @override
  void dispose() {
    // Clean up the controller when disposing of the Widget.
    myController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&#39;Retrieve Text Input&#39;),
      ),
      body: new Padding(
        padding: const EdgeInsets.all(16.0),
        child: new TextField(
          controller: myController,
        ),
      ),
      floatingActionButton: new FloatingActionButton(
        // When the user presses the button, show an alert dialog with the
        // text the user has typed into our text field.
        onPressed: () {
          return showDialog(
            context: context,
            builder: (context) {
              return new AlertDialog(
                // Retrieve the text the user has typed in using our
                // TextEditingController
                content: new Text(myController.text),
              );
            },
          );
        },
        tooltip: &#39;Show me the value!&#39;,
        child: new Icon(Icons.text_fields),
      ),
    );
  }
}</code></pre>

<p>您可以从 <a href="https://flutter.io/cookbook/">Flutter Cookbook</a> 中找到更多信息和<a href="/cookbook/forms/retrieve-input/">检索文本字段的值</a>中的完整代码列表。</p>

<h2 id="ios-中文本框的占位符在-flutter-中对应什么">iOS 中文本框的占位符在 Flutter 中对应什么？</h2>

<p>在 Flutter 中，您可以通过向 <code class="highlighter-rouge">Text</code> 小部件的装饰构造函数参数添加一个 <code class="highlighter-rouge">InputDecoration</code> 对象，轻松地为您的字段显示“提示”或占位符文本：</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>body: new Center(
  child: new TextField(
    decoration: new InputDecoration(hintText: &quot;This is a hint&quot;),
  ),
)</code></pre>

<h2 id="如何显示验证错误">如何显示验证错误？</h2>

<p>就像使用“提示”一样，将一个 <code class="highlighter-rouge">InputDecoration</code> 对象传递给 <code class="highlighter-rouge">Text</code> 文本的装饰构造函数。</p>

<p>但是，您不想通过显示错误开始。相反，当用户输入无效数据时，更新状态并传递一个新的 <code class="highlighter-rouge">InputDecoration</code> 对象。</p>

<!-- skip -->
<pre class="prettyprint highlighter-rouge highlight lang-dart language-dart"><code>class SampleApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return new MaterialApp(
      title: &#39;Sample App&#39;,
      theme: new ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: new SampleAppPage(),
    );
  }
}

class SampleAppPage extends StatefulWidget {
  SampleAppPage({Key key}) : super(key: key);

  @override
  _SampleAppPageState createState() =&gt; new _SampleAppPageState();
}

class _SampleAppPageState extends State&lt;SampleAppPage&gt; {
  String _errorText;

  @override
  Widget build(BuildContext context) {
    return new Scaffold(
      appBar: new AppBar(
        title: new Text(&quot;Sample App&quot;),
      ),
      body: new Center(
        child: new TextField(
          onSubmitted: (String text) {
            setState(() {
              if (!isEmail(text)) {
                _errorText = &#39;Error: This is not an email&#39;;
              } else {
                _errorText = null;
              }
            });
          },
          decoration: new InputDecoration(hintText: &quot;This is a hint&quot;, errorText: _getErrorText()),
        ),
      ),
    );
  }

  _getErrorText() {
    return _errorText;
  }

  bool isEmail(String em) {
    String emailRegexp =
        r&#39;^(([^&lt;&gt;()[\]\\.,;:\s@\&quot;]+(\.[^&lt;&gt;()[\]\\.,;:\s@\&quot;]+)*)|(\&quot;.+\&quot;))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$&#39;;

    RegExp regExp = new RegExp(p);

    return regExp.hasMatch(em);
  }
}</code></pre>

<h1 id="与硬件第三方服务和平台进行交互">与硬件，第三方服务和平台进行交互</h1>

<h2 id="如何与平台以及平台原生代码交互">如何与平台以及平台原生代码交互？</h2>

<p>Flutter 不直接在底层平台上运行代码;相反，构成 Flutter 应用程序的 Dart 代码在设备上本地运行，“避开”平台提供的SDK。这意味着，假如，当您在 Dart 中执行网络请求时，它将直接在 Dart 上下文中运行。在编写本机应用程序时，您不会使用通常使用的 Android 或 iOS  API 。您的 Flutter 应用程序仍作为视图托管在本机应用程序的 <code class="highlighter-rouge">ViewController</code> 中，但您无法直接访问 <code class="highlighter-rouge">ViewController</code> 本身或本机框架。</p>

<p>这并不意味着 Flutter 应用程序无法与这些本地 API 或任何本地代码进行交互。 Flutter 提供<a href="/platform-channels/">平台通道</a>，与承载 Flutter 视图的 <code class="highlighter-rouge">ViewController</code> 进行通信和交换数据。平台通道本质上是一个异步消息传递机制，它将 Dart 代码与主机 <code class="highlighter-rouge">ViewController</code> 及其运行的 iOS 框架桥接在一起。例如，您可以使用平台通道在本机端执行方法，或从设备的传感器检索一些数据。</p>

<p>除了直接使用平台频道之外，您还可以使用各种预制的<a href="/using-packages/">插件</a>封装原生和 Dart 代码以实现特定目标。例如，您可以使用插件直接从 Flutter 访问相机相册和设备相机，而无需编写自己的集成。 Plugins 可以在 Dart 和 Flutter 的开源软件包存储库( <a href="https://pub.dartlang.org/">Pub</a> )中找到。某些软件包可能支持 iOS 或 Android 或两者的本机集成。</p>

<p>如果您无法在 Pub 上找到适合您需求的插件，您可以<a href="/developing-packages/">编写自己的插件</a>并将其<a href="/developing-packages/#publish">发布到 Pub 上</a>。</p>

<h2 id="如何使用-gps-传感器">如何使用 GPS 传感器？</h2>

<p>使用 <a href="https://pub.dartlang.org/packages/location"><code class="highlighter-rouge">location</code></a> 社区插件。</p>

<h2 id="如何使用相机服务">如何使用相机服务?</h2>

<p><a href="https://pub.dartlang.org/packages/image_picker"><code class="highlighter-rouge">image_picker</code></a> 插件是访问摄像机的热门选择。</p>

<h2 id="如何使用-facebook-进行登录">如何使用 Facebook 进行登录?</h2>

<p>要使用 Facebook 登录，请使用 <a href="https://pub.dartlang.org/packages/flutter_facebook_login"><code class="highlighter-rouge">flutter_facebook_login</code></a>  社区插件。</p>

<h2 id="如何使用firebase功能">如何使用Firebase功能？</h2>

<p>大多数 Firebase 功能都由<a href="https://pub.dartlang.org/flutter/packages?q=firebase">第一方插件</a>覆盖。这些插件是由 Flutter 团队维护的第一方集成：</p>

<ul>
  <li>Firebase AdMob <a href="https://pub.dartlang.org/packages/firebase_admob"><code class="highlighter-rouge">firebase_admob</code></a></li>
  <li>Firebase Analytics <a href="https://pub.dartlang.org/packages/firebase_analytics"><code class="highlighter-rouge">firebase_analytics</code></a></li>
  <li>Firebase Auth <a href="https://pub.dartlang.org/packages/firebase_auth"><code class="highlighter-rouge">firebase_auth</code></a></li>
  <li>Firebase Core <a href="https://pub.dartlang.org/packages/firebase_core"><code class="highlighter-rouge">firebase_core</code></a></li>
  <li>Firebase RTDB <a href="https://pub.dartlang.org/packages/firebase_database"><code class="highlighter-rouge">firebase_database</code></a></li>
  <li>Firebase Cloud Storage <a href="https://pub.dartlang.org/packages/firebase_storage"><code class="highlighter-rouge">firebase_storage</code></a></li>
  <li>Firebase Messaging (FCM) <a href="https://pub.dartlang.org/packages/firebase_messaging"><code class="highlighter-rouge">firebase_messaging</code></a></li>
  <li>Firebase Cloud Firestore <a href="https://pub.dartlang.org/packages/cloud_firestore"><code class="highlighter-rouge">cloud_firestore</code></a></li>
</ul>

<p>您还可以在 Pub 上找到一些第三方 Firebase 插件，这些插件涵盖了第一方插件未覆盖的区域。</p>

<h2 id="如何构建自己的定制本地集成">如何构建自己的定制本地集成？</h2>

<p>如果 Flutter 或其社区插件缺失的平台特定功能，您可以根据<a href="/developing-packages/">开发包和插件</a>页面构建自己的功能。</p>

<p>简而言之，Flutter 的插件架构就像在 Android 中使用 Event bus 一样：您触发一条消息并让接收者进行处理并将结果发回给您。在这种情况下，接收者是在 Android 或 iOS 上运行在本机端的代码。</p>

<h1 id="数据库和本地存储">数据库和本地存储</h1>

<h2 id="flutter-中如何使用-userdefaults-">Flutter 中如何使用 <code class="highlighter-rouge">UserDefaults</code> ？</h2>

<p>在 iOS 中，您可以使用属性列表（也就是 <code class="highlighter-rouge">UserDefaults</code> ）来存储键值对的集合。</p>

<p>在 Flutter 中，使用 <a href="https://pub.dartlang.org/packages/shared_preferences">Shared Preferences</a> 插件访问同等功能。这个插件包装了 <code class="highlighter-rouge">UserDefaults</code> 和 Android <code class="highlighter-rouge">SharedPreferences</code> 同等的功能。</p>

<h2 id="ios-中的-coredata-在-flutter-中对应什么">iOS 中的 CoreData 在 Flutter 中对应什么</h2>

<p>在 iOS 中，您可使用 CoreData 来存储结构化数据,这是 SQL 数据库的更高级的抽象概念，使查询与您模型相关联变得更加容易。</p>

<p>在 Flutter 中，使用 <a href="https://pub.dartlang.org/packages/sqflite">SQFlite</a> 插件访问该功能。</p>

<h1 id="通知">通知</h1>

<h2 id="如何设置推送通知">如何设置推送通知？</h2>

<p>在 iOS 中，您需要在开发者平台上注册您的应用程序以允许推送通知。</p>

<p>在 Flutter 中 ，使用 <code class="highlighter-rouge">firebase_messaging</code> 插件访问此功能。</p>

<p>有关  Firebase Cloud Messaging API 的更多使用信息，请参阅 <a href="https://pub.dartlang.org/packages/firebase_messaging"><code class="highlighter-rouge">firebase_messaging</code></a> 插件文档。</p>

</article>

          </div>
        </div>

        

      </div> <!-- /.row -->
    </div> <!-- /.container -->

    <footer class="site-footer">
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-12">
        <div class="logo">
          <img src="/images/flutter-mark-square-100.png" alt="Flutter Logo" width="100" height="100">
        </div>
        <p class="site-footer__link-list">
          <a href="https://groups.google.com/forum/#!forum/flutter-dev">flutter-dev@</a> &bull;
          <a href="https://twitter.com/flutterio">twitter</a> &bull;
          <a href="https://github.com/flutter/">github</a> &bull;
          <a href="/tos">terms</a> &bull;
          <a href="https://www.google.com/intl/en/policies/privacy/">privacy</a> &bull;
          <a href="https://github.com/orgs/flutter-dev/teams/flutter/">翻译组</a>
        </p>

        <p class="licenses">
          除非另有说明，否则本作品根据
          <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">知识共享署名 4.0 国际许可证</a>进行许可，代码示例已根据 BSD 许可证进行许可。
        </p>
      </div>
    </div>
  </div>
</footer>

    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="/js/sidebar_toggle.js"></script>
    <script src="/js/customscripts.js"></script>
    <script src="/js/prism.js"></script>
    <script src="/js/tabs.js"></script>
    <script src="/js/archive.js"></script>
    
    <script async="" defer="" src="//survey.g.doubleclick.net/async_survey?site=at3ul57xpub2vk3oxt2ytw365i"></script>
  </body>
</html>
